<!DOCTYPE html>
<html lang="ja-JP">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Furumai | Furumai</title>
    <meta name="description" content="Furumai: Behavior description tool">
    <meta name="og:image" content="/furumai/docs/og.png">
    
    <link rel="preload" href="/furumai/docs/assets/css/0.styles.1c1c1b6e.css" as="style"><link rel="preload" href="/furumai/docs/assets/js/app.5eb7dd47.js" as="script"><link rel="preload" href="/furumai/docs/assets/js/10.45601207.js" as="script"><link rel="preload" href="/furumai/docs/assets/js/4.3f3f095b.js" as="script"><link rel="prefetch" href="/furumai/docs/assets/js/11.d0f11617.js"><link rel="prefetch" href="/furumai/docs/assets/js/12.6c9cdbd9.js"><link rel="prefetch" href="/furumai/docs/assets/js/2.25862ca3.js"><link rel="prefetch" href="/furumai/docs/assets/js/3.3ad1a70b.js"><link rel="prefetch" href="/furumai/docs/assets/js/5.7fa21cb8.js"><link rel="prefetch" href="/furumai/docs/assets/js/6.2dd9cfd7.js"><link rel="prefetch" href="/furumai/docs/assets/js/7.8d3e796d.js"><link rel="prefetch" href="/furumai/docs/assets/js/8.ff08ef7e.js"><link rel="prefetch" href="/furumai/docs/assets/js/9.1bbcb9a1.js">
    <link rel="stylesheet" href="/furumai/docs/assets/css/0.styles.1c1c1b6e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/furumai/docs/ja/" aria-current="page" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">Furumai</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/furumai/docs/" class="nav-link">en-US</a></li><li class="dropdown-item"><!----> <a href="/furumai/docs/ja/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ja-JP</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/furumai/docs/" class="nav-link">en-US</a></li><li class="dropdown-item"><!----> <a href="/furumai/docs/ja/" aria-current="page" class="nav-link router-link-exact-active router-link-active">ja-JP</a></li></ul></div></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h1 id="furumai"><a href="#furumai" class="header-anchor">#</a> Furumai</h1> <p>システムやアルゴリズムの動作図（パラパラ漫画）を、DOT（Graphviz）風のテキスト記述から生成できるツールを作りました:
<a href="https://raiich.github.io/furumai/">Furumai - behavior visualization tool</a></p> <h1 id="ギャラリー"><a href="#ギャラリー" class="header-anchor">#</a> ギャラリー</h1> <!----> <!----> <!----> <!----> <h1 id="特徴"><a href="#特徴" class="header-anchor">#</a> 特徴</h1> <ul><li>テキストベースの記述
<ul><li>DOT（Graphviz）風の言語で記述
<ul><li>システムやアルゴリズムの記述に特化したDSLでSVG画像を生成</li></ul></li> <li>1枚絵ではなく動作図（パラパラ漫画）をテキスト記述から生成</li></ul></li> <li>SVGでの出力
<ul><li>SVG属性の指定により見た目を変更できます</li></ul></li> <li>CSS風のFlexboxモデルで配置を指定できるレイアウトエンジン</li></ul> <h1 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h1> <p>既存のお絵かきツール・図表生成ツールには下記の使いにくさがありました。</p> <ul><li><p>GUIのお絵かきツール</p> <ul><li>自由に配置できる反面、要素数が多いと作図・調整が手間</li> <li>複数枚の図があるとき、1枚変更すると後続の図も修正しないといけない</li></ul></li> <li><p>テキストベースの図表生成ツール</p> <ul><li>要素の位置の指定がしにくい</li> <li>状態変化を表現しにくい
<ul><li>要素の追加・削除で他要素の位置が変わってしまう</li> <li>記述量が多くなりがち（図全体を枚数分だけ記述しないといけない）</li></ul></li></ul></li></ul> <p>そこで自動で図中の各要素の配置を調整して動作図を作成できるツールを開発しました。</p> <h1 id="機能"><a href="#機能" class="header-anchor">#</a> 機能</h1> <h2 id="基本図形"><a href="#基本図形" class="header-anchor">#</a> 基本図形</h2> <p>基本図形として <code>box</code> / <code>person</code> / <code>cylinder</code> / <code>pipe</code> が指定できます。
要素間に矢印 (<code>-&gt;</code> or <code>--</code>) を配置できます。</p> <!----> <!----> <h2 id="アイコン"><a href="#アイコン" class="header-anchor">#</a> アイコン</h2> <p>アイコン名を指定すると、Font Awesomeアイコンを使用できます。</p> <!----> <!----> <h2 id="動作図（パラパラ漫画）を出力"><a href="#動作図（パラパラ漫画）を出力" class="header-anchor">#</a> 動作図（パラパラ漫画）を出力</h2> <p><code>---</code> で動作図の各フレームを区切ります。</p> <h3 id="差分記述モード-デフォルト"><a href="#差分記述モード-デフォルト" class="header-anchor">#</a> 差分記述モード (デフォルト)</h3> <p>デフォルトでは差分記述モードです。
アルゴリズムの動作説明などの「小さな変化がつみかさなる」ようなものの場合に差分記述モードが役立ちます。</p> <!----> <!----> <p>初期状態で非表示にすれば、変更があってから表示されるようにできます。</p> <!----> <!----> <h3 id="スナップショットモード"><a href="#スナップショットモード" class="header-anchor">#</a> スナップショットモード</h3> <p>フレームごとに独立している場合はスナップショットモードを使います。</p> <!----> <!----> <h2 id="ラベル-テキスト"><a href="#ラベル-テキスト" class="header-anchor">#</a> ラベル / テキスト</h2> <!----> <!----> <h2 id="svg属性"><a href="#svg属性" class="header-anchor">#</a> SVG属性</h2> <!----> <!----> <h2 id="zone-group"><a href="#zone-group" class="header-anchor">#</a> Zone / Group</h2> <p>図表の構成要素をまとめる方法として下記のものがあります。</p> <ul><li><code>group</code> <ul><li>横方向にならべてまとめます</li></ul></li> <li><code>zone</code> <ul><li>縦方向にならべてまとめます</li></ul></li></ul> <!----> <!----> <h2 id="スタイル指定"><a href="#スタイル指定" class="header-anchor">#</a> スタイル指定</h2> <p>CSSのようにスタイル指定ができます。
ノード等の名前はIDとして使用されます。クラス名も設定できます。</p> <p>標準で用意されているIDおよびクラスには下記があります。</p> <ul><li><code>#root</code> : トップレベル要素</li> <li><code>.group</code>, <code>.zone</code> : グループ、ゾーン</li> <li><code>.node</code>, <code>.edge</code> : ノード、エッジ</li> <li><code>.text</code>, <code>.label</code> : テキスト、ラベル</li></ul> <!----> <!----> <h2 id="margin-padding"><a href="#margin-padding" class="header-anchor">#</a> Margin / Padding</h2> <p>ウェブページにおける <code>margin</code> / <code>padding</code> のような余白を設定できます。</p> <!----> <!----> <h2 id="dx-dy"><a href="#dx-dy" class="header-anchor">#</a> dx / dy</h2> <p>矢印の配置が重なってしまうケースがあります。その場合、 <code>dx</code> / <code>dy</code> 属性により配置をずらせます。</p> <!----> <!----> <h2 id="flexbox風レイアウト"><a href="#flexbox風レイアウト" class="header-anchor">#</a> Flexbox風レイアウト</h2> <!----> <!----> <h2 id="方向"><a href="#方向" class="header-anchor">#</a> 方向</h2> <p><code>style</code> における <code>flex-direction</code> の指定、 <code>config</code> における <code>orientation</code> の指定により配置方向を変更できます。</p> <!----> <!----> <!----> <!----> <h2 id="表示済み要素の非表示"><a href="#表示済み要素の非表示" class="header-anchor">#</a> 表示済み要素の非表示</h2> <p>表示済み要素を非表示にするには下記のように <code>hide</code> を使用します。</p> <!----> <!----> <h2 id="コメント"><a href="#コメント" class="header-anchor">#</a> コメント</h2> <p><code>//</code> はラインコメントです。</p> <h2 id="rough-mode"><a href="#rough-mode" class="header-anchor">#</a> Rough Mode</h2> <p><code>Rough.js</code> のチェックボックスにチェックを入れると、Rough.jsが有効になります。</p> <h1 id="文法"><a href="#文法" class="header-anchor">#</a> 文法</h1> <div class="language-g4 extra-class"><pre class="language-g4"><code><span class="token keyword">grammar</span> Furumai<span class="token punctuation">;</span>

<span class="token definition rule class-name">story</span>
  <span class="token punctuation">:</span> config<span class="token operator">?</span> layout <span class="token punctuation">(</span> <span class="token string">'---'</span> update <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token string">'---'</span><span class="token operator">?</span> <span class="token constant">EOF</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">config</span>
  <span class="token punctuation">:</span> <span class="token string">'config'</span> <span class="token string">'{'</span> declaration<span class="token operator">?</span> <span class="token punctuation">(</span> <span class="token string">';'</span> declaration <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token string">';'</span><span class="token operator">?</span> <span class="token string">'}'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">layout</span>
  <span class="token punctuation">:</span> stmt_list
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">update</span>
  <span class="token punctuation">:</span> stmt_list
  <span class="token punctuation">;</span>

<span class="token definition rule class-name">stmt_list</span>
  <span class="token punctuation">:</span> stmt<span class="token operator">*</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">stmt</span>
  <span class="token punctuation">:</span> group
  <span class="token operator">|</span> zone
  <span class="token operator">|</span> node_stmt
  <span class="token operator">|</span> edge_stmt
  <span class="token operator">|</span> hide
  <span class="token operator">|</span> declaration
  <span class="token operator">|</span> style
  <span class="token operator">|</span> semi_colon
  <span class="token punctuation">;</span>

<span class="token definition rule class-name">group</span>
  <span class="token punctuation">:</span> <span class="token string">'group'</span> <span class="token constant">ID</span> <span class="token string">'{'</span> stmt_list <span class="token string">'}'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">zone</span>
  <span class="token punctuation">:</span> <span class="token string">'zone'</span> <span class="token constant">ID</span> <span class="token string">'{'</span> stmt_list <span class="token string">'}'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">node_stmt</span>
  <span class="token punctuation">:</span> <span class="token constant">ID</span> <span class="token string">';'</span>
  <span class="token operator">|</span> <span class="token constant">ID</span> attr_list
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">edge_stmt</span>
  <span class="token punctuation">:</span> <span class="token constant">ID</span> <span class="token constant">EDGEOP</span> <span class="token constant">ID</span> <span class="token string">';'</span>
  <span class="token operator">|</span> <span class="token constant">ID</span> <span class="token constant">EDGEOP</span> <span class="token constant">ID</span> attr_list
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">attr_list</span>
  <span class="token punctuation">:</span> <span class="token string">'['</span> declaration <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token string">','</span> <span class="token operator">|</span> <span class="token string">';'</span> <span class="token punctuation">)</span><span class="token operator">?</span>  declaration <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token punctuation">(</span> <span class="token string">','</span> <span class="token operator">|</span> <span class="token string">';'</span> <span class="token punctuation">)</span><span class="token operator">?</span> <span class="token string">']'</span>
  <span class="token operator">|</span> <span class="token string">'['</span> <span class="token string">']'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">hide</span>
  <span class="token punctuation">:</span> hide_elem
  <span class="token operator">|</span> hide_edge
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">hide_elem</span>
  <span class="token punctuation">:</span> <span class="token string">'hide'</span> <span class="token constant">ID</span> <span class="token string">';'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">hide_edge</span>
  <span class="token punctuation">:</span> <span class="token string">'hide'</span> <span class="token constant">ID</span> <span class="token constant">EDGEOP</span> <span class="token constant">ID</span> <span class="token string">';'</span>
  <span class="token punctuation">;</span>

<span class="token definition rule class-name">style</span>
  <span class="token punctuation">:</span> <span class="token string">'style'</span> <span class="token string">'{'</span> css_stmt<span class="token operator">*</span> <span class="token string">'}'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">css_stmt</span>
  <span class="token punctuation">:</span> selector_list <span class="token string">'{'</span> declaration<span class="token operator">?</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token string">','</span> <span class="token operator">|</span> <span class="token string">';'</span> <span class="token punctuation">)</span> declaration <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token punctuation">(</span> <span class="token string">','</span> <span class="token operator">|</span> <span class="token string">';'</span> <span class="token punctuation">)</span><span class="token operator">?</span> <span class="token string">'}'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">selector_list</span>
  <span class="token punctuation">:</span> selector <span class="token punctuation">(</span> <span class="token string">','</span> selector <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token string">','</span><span class="token operator">?</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">selector</span>
  <span class="token punctuation">:</span> combined_selector<span class="token operator">*</span> basic_selector
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">combined_selector</span>
  <span class="token punctuation">:</span> basic_selector combinator<span class="token operator">?</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">combinator</span>
  <span class="token punctuation">:</span> <span class="token string">'&gt;'</span>
  <span class="token punctuation">;</span>

<span class="token definition rule class-name">basic_selector</span>
  <span class="token punctuation">:</span> univ_selector
  <span class="token operator">|</span> type_selector
  <span class="token operator">|</span> class_selector
  <span class="token operator">|</span> id_selector
  <span class="token operator">|</span> edge_selector
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">univ_selector</span>
  <span class="token punctuation">:</span> <span class="token string">'*'</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">type_selector</span>
  <span class="token punctuation">:</span> <span class="token constant">ID</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">class_selector</span>
  <span class="token punctuation">:</span> <span class="token constant">DOT</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">id_selector</span>
  <span class="token punctuation">:</span> <span class="token constant">HASH</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">edge_selector</span>
  <span class="token punctuation">:</span> <span class="token constant">ID</span> <span class="token constant">EDGEOP</span> <span class="token constant">ID</span>
  <span class="token punctuation">;</span>

<span class="token definition rule class-name">declaration</span>
  <span class="token punctuation">:</span> <span class="token constant">ID</span> <span class="token constant">DOT</span><span class="token operator">*</span> <span class="token punctuation">(</span> <span class="token string">':'</span> <span class="token operator">|</span> <span class="token string">'='</span> <span class="token punctuation">)</span> val<span class="token operator">+</span>
  <span class="token punctuation">;</span>
<span class="token definition rule class-name">val</span>
  <span class="token punctuation">:</span> <span class="token constant">STRING</span>
  <span class="token operator">|</span> <span class="token constant">ID</span>
  <span class="token operator">|</span> <span class="token constant">HASH</span>
  <span class="token punctuation">;</span>

<span class="token definition rule class-name">semi_colon</span>
  <span class="token punctuation">:</span> <span class="token string">';'</span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">ID</span>
  <span class="token punctuation">:</span> <span class="token string">'-'</span><span class="token operator">?</span> <span class="token character-class regex"><span class="token punctuation">[</span>a<span class="token range punctuation">-</span>zA<span class="token range punctuation">-</span>Z_0<span class="token range punctuation">-</span>9<span class="token punctuation">]</span></span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token string">'-'</span> <span class="token character-class regex"><span class="token punctuation">[</span>a<span class="token range punctuation">-</span>zA<span class="token range punctuation">-</span>Z_0<span class="token range punctuation">-</span>9<span class="token punctuation">]</span></span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">HASH</span>
  <span class="token punctuation">:</span> <span class="token string">'#'</span> <span class="token constant">ID</span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">DOT</span>
  <span class="token punctuation">:</span> <span class="token string">'.'</span> <span class="token constant">ID</span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">STRING</span>
  <span class="token punctuation">:</span> <span class="token string">'\''</span> <span class="token punctuation">(</span> <span class="token operator">~</span><span class="token string">'\''</span> <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token string">'\''</span> <span class="token action"><span class="token punctuation">{</span><span class="token content"> this.text = this.text.slice(1, -1)</span><span class="token punctuation">}</span></span>
  <span class="token operator">|</span> <span class="token string">'&quot;'</span> <span class="token punctuation">(</span> <span class="token operator">~</span><span class="token string">'&quot;'</span> <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token string">'&quot;'</span> <span class="token action"><span class="token punctuation">{</span><span class="token content"> this.text = this.text.slice(1, -1) </span><span class="token punctuation">}</span></span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">EDGEOP</span>
  <span class="token punctuation">:</span> <span class="token string">'--'</span>
  <span class="token operator">|</span> <span class="token string">'-&gt;'</span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">SPACES</span>
  <span class="token punctuation">:</span> <span class="token character-class regex"><span class="token punctuation">[</span> <span class="token escape">\u000B</span><span class="token escape">\t</span><span class="token escape">\r</span><span class="token escape">\n</span><span class="token punctuation">]</span></span> <span class="token operator">-&gt;</span> <span class="token command"><span class="token function">channel</span><span class="token punctuation">(</span>HIDDEN<span class="token punctuation">)</span></span>
  <span class="token punctuation">;</span>

<span class="token definition token constant">SINGLE_LINE_COMMENT</span>
  <span class="token punctuation">:</span> <span class="token string">'//'</span> <span class="token punctuation">(</span> <span class="token operator">~</span><span class="token punctuation">(</span><span class="token string">'\r'</span> <span class="token operator">|</span> <span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token string">'\r'</span> <span class="token operator">|</span> <span class="token string">'\n'</span> <span class="token operator">|</span> <span class="token constant">EOF</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token command"><span class="token function">channel</span><span class="token punctuation">(</span>HIDDEN<span class="token punctuation">)</span></span>
  <span class="token punctuation">;</span>
</code></pre></div><div id="footer" data-v-54addd93><hr data-v-54addd93> <a href="/furumai/docs/about.html" data-v-54addd93>About</a> <a href="/furumai/docs/gallery.html" data-v-54addd93>Gallery</a> <a href="https://github.com/raiich/furumai" data-v-54addd93>GitHub Repository</a></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/furumai/docs/assets/js/app.5eb7dd47.js" defer></script><script src="/furumai/docs/assets/js/10.45601207.js" defer></script><script src="/furumai/docs/assets/js/4.3f3f095b.js" defer></script>
  </body>
</html>
