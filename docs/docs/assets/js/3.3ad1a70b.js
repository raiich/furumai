(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{170:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Territory=e.Area=e.Gap=e.Boundary=e.Point=e.Length=void 0;const r=s(179);class i{constructor(t){this.px=t}static parse(t){return new i(Number(t.substr(0,t.length-this.unit.length)))}toString(){return`${this.px}${i.unit}`}}i.unit="px",i.zero=new i(0);class n{constructor(t){this.v=t}get pixel(){return this.v.px}static pixel(t){return new n(new i(t))}static parse(t){return t.endsWith("px")?new n(i.parse(t)):n.pixel(Number(t))}static isAuto(t){return"auto"===t}static max(...t){return t.reduce((t,e)=>t.v.px>e.v.px?t:e,n.zero)}static create(t){return new n(new i(t))}add(t){return n.create(this.v.px+t.v.px)}sub(t){return n.create(this.v.px-t.v.px)}div(t){return n.create(Math.floor(this.v.px/t))}toString(){return this.v.toString()}}e.Length=n,n.zero=n.create(0);class o{constructor(t,e){this.x=t,this.y=e}add(t){return new o(this.x.add(t.x),this.y.add(t.y))}addGap(t){const{top:e,left:s}=t;return new o(this.x.add(e),this.y.add(s))}move(t,e){return new o(this.x.add(t),this.y.add(e))}}e.Point=o,o.zero=new o(n.zero,n.zero);class a{constructor(t,e){this.width=t,this.height=e}static max(...t){return t.reduce((t,e)=>new a(n.max(t.width,e.width),n.max(t.height,e.height)),a.zero)}add(t){const{top:e,right:s,bottom:r,left:i}=t,{width:n,height:o}=this;return new a(n.add(s).add(i),o.add(e).add(r))}sub(t){const{top:e,right:s,bottom:r,left:i}=t,{width:n,height:o}=this;return new a(n.sub(s).sub(i),o.sub(e).sub(r))}diff(t){return h.gap2(this.height.sub(t.height).div(2),this.width.sub(t.width).div(2))}}e.Boundary=a,a.zero=new a(n.zero,n.zero);class h{constructor(t,e,s,r){this.top=t,this.right=e,this.bottom=s,this.left=r}static of(t){const e=t.split(" ").map(n.parse);switch(e.length){case 0:return h.zero;case 1:return h.gap1(e[0]);case 2:return h.gap2(e[0],e[1]);case 4:return h.gap4(e[0],e[1],e[2],e[3]);default:throw new Error("invalid attr for Gap: "+t)}}static gap1(t){return new h(t,t,t,t)}static gap2(t,e){return new h(t,e,t,e)}static gap4(t,e,s,r){return new h(t,e,s,r)}toString(){return`${this.top} ${this.right} ${this.bottom} ${this.left}`}div(t){return new h(this.top.div(t),this.right.div(t),this.bottom.div(t),this.left.div(t))}}e.Gap=h,h.zero=h.gap1(n.zero);class c{constructor(t,e,s,r){this.width=t,this.height=e,this.padding=s,this.margin=r}static of(t,e,s){const{width:r,height:i}=t;return new c(r,i,e,s)}static parse(t){const{width:e,height:s,padding:i,margin:o}=t,a={width:r.m(n.isAuto,e)?void 0:r.m(n.parse,e),height:r.m(n.isAuto,s)?void 0:r.m(n.parse,s),padding:r.m(h.of,i),margin:r.m(h.of,o)};return r.deleteUndefined(a)}get base(){return new a(this.width,this.height)}diff(t){const{width:e,height:s}=this.base,{top:r,right:i,bottom:n,left:o}=this.padding;return new a(e.sub(i).sub(t.width).sub(o),s.sub(r).sub(t.height).sub(n))}get totalSize(){return this.base.add(this.margin)}get contentSize(){return this.base.sub(this.padding)}get cx(){return this.width.div(2)}get cy(){return this.height.div(2)}get center(){return new o(this.cx,this.cy)}asPixel(){return{width:this.width.pixel,height:this.height.pixel}}}e.Area=c,c.zero=c.of(a.zero,h.zero,h.zero);e.Territory=class{constructor(t,e){this.start=t,this.area=e}get end(){const{x:t,y:e}=this.start,{width:s,height:r}=this.area.base;return new o(t.add(s),e.add(r))}get center(){return this.start.add(this.area.center)}get width(){return this.area.width}get height(){return this.area.height}get cx(){return this.center.x}get cy(){return this.center.y}}},179:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StyleList=e.ChildCombinator=e.DescendantCombinator=e.CombinedSelector=e.ClassSelector=e.IdSelector=e.UnivSelector=e.Selector=e.Ruleset=e.asString=e.deleteUndefined=e.deleteField=e.m=void 0,e.m=function(t,e){if(e)return t(e)},e.deleteField=function(t,e){const s=Object.assign({},t);return e.forEach(t=>delete s[t]),s},e.deleteUndefined=function(t){const e=t;return Object.keys(t).reduce((t,s)=>e[s]?Object.assign(Object.assign({},t),{[s]:e[s]}):t,{})},e.asString=function(t){return Object.keys(t).reduce((e,s)=>(e[s]=t[s].toString(),e),{})};class r{constructor(t,e){this.selectors=t,this.declarations=e}static of(t,e){return new r(t,e)}selectorList(){return this.selectors.map(t=>t.toCssSelector())}toCss(){const t=[];for(const e of Object.keys(this.declarations))t.push(e+": "+this.declarations[e]);return`${this.selectorList().join(", ")} {\n  ${t.join(";\n  ")}\n}`}}e.Ruleset=r;class i{constructor(t,e){this.base=t,this.combined=e}static of(t){return new i(t,[])}static combined(t,e){return new i(e,t.reverse())}isMatch(t){if(!this.base.isMatch(t))return!1;let e=0,s=t.parent;for(;s&&e<this.combined.length;)if(this.combined[e].selector.isMatch(s))e++,s=s.parent;else{if(this.combined[e].combinator instanceof h)return!1;if(!(this.combined[e].combinator instanceof a))throw new Error("not implemented");s=s.parent}return e>=this.combined.length}toCssSelector(){const t=this.combined.reverse().map(t=>t.toCssSelector());return t.push(this.base.toCssSelector()),t.join("")}}e.Selector=i;e.UnivSelector=class{isMatch(t){return!0}toCssSelector(){return"*"}};class n{constructor(t){this.id=t}static of(t){return new n(t.substr(1,t.length-1))}isMatch(t){return t.id===this.id}toCssSelector(){return"#"+this.id}}e.IdSelector=n;class o{constructor(t){this.className=t}static of(t){return new o(t.substr(1,t.length-1))}isMatch(t){return(t.classNames?t.classNames:[]).reduce((t,e)=>t||this.className===e,!1)}toCssSelector(){return"."+this.className}}e.ClassSelector=o;e.CombinedSelector=class{constructor(t,e){this.selector=t,this.combinator=e}toCssSelector(){return this.selector.toCssSelector()+this.combinator.toCssCombinator()}};class a{toCssCombinator(){return" "}}e.DescendantCombinator=a;class h{toCssCombinator(){return" > "}}e.ChildCombinator=h;class c{constructor(t){this.rules=t}static of(t){return new c(t)}update(t){return this.rules.push(...t.rules),this}query(t){return this.rules.filter(e=>e.selectors.some(e=>e.isMatch(t))).reduce((t,e)=>Object.assign(Object.assign({},t),e.declarations),{})}toCss(){return this.rules.map(t=>t.toCss()).join("\n")}}e.StyleList=c},205:function(t,e,s){"use strict";s.r(e);var r=s(206),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},206:function(t,e,s){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});const i=s(166),n=s(183),o=i.__importDefault(s(275)),a=s(374);let h=r=class extends n.Vue{constructor(){super(...arguments),this.ver=-1,this.furumaiData={}}appUrl(t){return"/furumai/#/apps/"+t}mounted(){if(this.url){const t=this.url.split("/");if(t[0]!==r.codec.formatVersion)throw new Error("unsupported data format version: "+t[0]);{const e=r.codec.decode(t[1]),{version:s}=e,n=i.__rest(e,["version"]);if(!(s&&s>0))throw new Error("app version is not specified");this.ver=s,this.furumaiData=n}}}};h.codec=new a.DataEncoderDecoderV1,i.__decorate([n.Prop({default:"no name"})],h.prototype,"filename",void 0),i.__decorate([n.Prop()],h.prototype,"url",void 0),i.__decorate([n.Prop({default:"true"})],h.prototype,"viewCode",void 0),h=r=i.__decorate([n.Component({components:{FurumaiApp1:o.default}})],h),e.default=h},207:function(t,e,s){"use strict";s.r(e);var r=s(208),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},208:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(166),i=s(183),n=r.__importDefault(s(276)),o=s(286);let a=class extends i.Vue{constructor(){super(...arguments),this.svgs=[],this.errors="",this.defaults=o.defaultString}onRouteChanged(t,e){this.draw(this.furumaiData.code)}pre(t){return t.replace(/</g,"&lt;")}mounted(){const t=this.$refs.editor;t&&t.focus(),this.draw(this.furumaiData.code)}furumai(){this.changeUrl(this.furumaiData)}download(){const t=this.$refs.moments.getElementsByClassName("svg-root");for(let e=0;e<t.length;e++){const s=t.item(e);if(s){const t='<?xml version="1.0" encoding="UTF-8"?>'+s.outerHTML,r=window.URL.createObjectURL(new Blob([t],{type:"image/svg+xml"})),i=document.createElement("a");i.href=r,i.download=`furumai-${e}.svg`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}}draw(t){this.errors="";Object.assign({},this.furumaiData.animation);try{let e=o.toSvgModels(t);if(!this.furumaiData.displayFirstSvg){const[t,...s]=e;e=s.length>0?s:e}this.svgs=e}catch(t){this.errors=t.stack||""}}};r.__decorate([i.Prop({default:{}})],a.prototype,"furumaiData",void 0),r.__decorate([i.Prop()],a.prototype,"changeUrl",void 0),r.__decorate([i.Prop({default:!0})],a.prototype,"editorMode",void 0),r.__decorate([i.Prop({default:!0})],a.prototype,"viewCode",void 0),r.__decorate([i.Watch("$route")],a.prototype,"onRouteChanged",null),a=r.__decorate([i.Component({components:{SvgComponent:n.default}})],a),e.default=a},209:function(t,e,s){"use strict";s.r(e);var r=s(210),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},210:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(166),i=s(183),n=r.__importDefault(s(277)),o=s(285),a=s(170);let h=class extends i.Vue{constructor(){super(...arguments),this.roughHtml=""}mounted(){i.Vue.nextTick(()=>this.refresh())}onShapeChanged(t,e){this.roughHtml="",i.Vue.nextTick(()=>this.refresh())}refresh(){if(this.rough){const t=this.$refs.svgContainer.firstElementChild,e=o.convertSvg(t);this.roughHtml=e.innerHTML}}get width(){return a.Length.pixel(Math.max(this.svg.size.width.pixel,640))}get height(){return this.svg.size.height}get viewBox(){const t=this.width.toString(),e=this.height.toString();if(t.endsWith("px")&&e.endsWith("px")){return`0 0 ${t.substr(0,t.length-2)} ${e.substr(0,e.length-2)}`}throw new Error(`unsupported length: ${t}, ${e}`)}};r.__decorate([i.Prop()],h.prototype,"svg",void 0),r.__decorate([i.Prop()],h.prototype,"rough",void 0),r.__decorate([i.Watch("svg")],h.prototype,"onShapeChanged",null),h=r.__decorate([i.Component({components:{Group:n.default}})],h),e.default=h},211:function(t,e,s){"use strict";s.r(e);var r=s(212),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},212:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(166),i=s(183),n=r.__importDefault(s(278)),o=r.__importDefault(s(279)),a=r.__importDefault(s(280));let h=class extends i.Vue{get attrs(){return this.g.elem.visibility?{visibility:this.g.elem.visibility,id:this.g.elem.id,class:this.g.elem.className}:{id:this.g.elem.id,class:this.g.elem.className}}get childAttrs(){return this.g.elem.secureAttrs.svgAttrs}};r.__decorate([i.Prop()],h.prototype,"g",void 0),h=r.__decorate([i.Component({name:"Group",components:{LabelComponent:n.default,TextContent:o.default,VIcon:a.default}})],h),e.default=h},213:function(t,e,s){"use strict";s.r(e);var r=s(214),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},214:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(166),i=s(183);let n=class extends i.Vue{};r.__decorate([i.Prop()],n.prototype,"text",void 0),n=r.__decorate([i.Component],n),e.default=n},215:function(t,e,s){"use strict";s.r(e);var r=s(216),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},216:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(166),i=s(183);let n=class extends i.Vue{};r.__decorate([i.Prop()],n.prototype,"text",void 0),n=r.__decorate([i.Component],n),e.default=n},217:function(t,e,s){"use strict";s.r(e);var r=s(218),i=s.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return r[t]}))}(n);e.default=i.a},218:function(t,e,s){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});const i=s(166),n=s(183);s(379);const o=i.__importDefault(s(157));let a=r=class extends n.Vue{static icons(){const t=[];for(const e of Object.keys(o.default.icons))t.push(e);return t}get name(){const t=this.elem.icon||"";if(r.validIcons.has(t))return t;throw new Error("Sorry, the attribute is not used for security reason: shape => "+this.elem.icon)}get svgAttrs(){const t=this.elem.secureAttrs.svgAttrs,{x:e,y:s,width:r,height:n}=t,o=i.__rest(t,["x","y","width","height"]);return{x:e,y:s,width:r,height:n,style:Object.keys(o).map(t=>`${t}:${o[t]}`).join(";")}}};a.validIcons=new Set(r.icons()),i.__decorate([n.Prop()],a.prototype,"elem",void 0),a=r=i.__decorate([n.Component({components:{"v-icon":o.default}})],a),e.default=a},265:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElemStyle=e.Elem=void 0;const r=s(179),i=s(266),n=s(269),o=s(267);class a{constructor(t,e,s,r){this.id=t,this.classNames=e,this.children=s,this.attrs=r}get _attrs(){return this.attrs}get contextMap(){const t=a.retrieve(this);return new c(t)}static of(t,e,s={},r=[]){const i=s.class?[...s.class.split(" "),e]:[e];return s.icon&&i.push("icon"),new a(t,i,r,s)}static retrieve(t,e){const s={id:t.id,classNames:t.classNames,parent:e};return t.children.reduce((t,e)=>Object.assign(Object.assign({},t),a.retrieve(e,s)),{[t.id]:s})}find(t){return this.id===t?this:this.children.reduce((e,s)=>e||s.find(t),void 0)}update(t){return this.attrs=Object.assign(Object.assign({},this.attrs),t.attrs),this}setVisibility(t){this.attrs.visibility=t}visible(){this.setVisibility("visible")}hide(){this.setVisibility("hidden")}resolveStyle(t,e){const s=e.map[this.id],r=t.query(s),i=t.query({classNames:["label"],parent:s}),n=t.query({classNames:["text"],parent:s}),o=this.attrs.class;o&&(this.classNames.push(o),delete this.attrs.class),Object.keys(this.attrs).forEach(t=>{if(t.startsWith("text.")){const e=t.substring("text.".length);n[e]=this.attrs[t],delete this.attrs[t]}}),Object.keys(this.attrs).forEach(t=>{if(t.startsWith("label.")){const e=t.substring("label.".length);i[e]=this.attrs[t],delete this.attrs[t]}});const a=l.of(i,n,Object.assign(Object.assign({},r),this.attrs)),c=this.children.reduce((s,r)=>(s.push(r.resolveStyle(t,e)),s),[]);return h.of(this.id,this.classNames,a,c)}}e.Elem=a;class h{constructor(t,e,s,r,i,n,o){this.id=t,this.classNames=e,this.appearance=s,this.layoutStyle=r,this.area=i,this.svgStyle=n,this.children=o}static of(t,e,s,r){return new h(t,e,s.shapeAttrs,s.shapeAttrs,s.shapeAttrs,s.toSvgStyle(),r)}layoutBox(){return n.Box.of(this.id,this.children.map(t=>t.layoutBox()),this.layoutStyle,this.area)}shape(t,e){const s=new i.Shape(t[this.id],this.appearance,e?this.svgStyle:l.empty.toSvgStyle());return{elem:i.createElem(this.id,this.classNames.join(" "),s),children:this.children.map(s=>s.shape(t,e))}}}class c{constructor(t){this.map=t}add(t){this.map[t.id]=t}}class l{constructor(t,e,s){this.labelAttrs=t,this.textAttrs=e,this.shapeAttrs=s}static of(t,e,s){return new l(t,e,s)}static toSecure(t){return o.SecureSvgAttrs.of(r.deleteField(t,["flex-direction","align-items","justify-content","padding","margin","shape","icon","label","text","t"]))}toSvgStyle(){return{labelAttrs:l.toSecure(this.labelAttrs),textAttrs:l.toSecure(this.textAttrs),shapeAttrs:l.toSecure(this.shapeAttrs)}}}e.ElemStyle=l,l.empty=l.of({},{},{})},266:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createArrow=e.createElem=e.Shape=void 0;const r=s(267),i=s(364),n=s(365),o=s(366),a=s(367),h=s(368),c=s(369),l=s(370),u=s(179);e.Shape=class{constructor(t,e,s){this.territory=t,this.appearance=e,this.style=s}label(t){const e=this.appearance,s=this.territory,r=this.style.labelAttrs;return e.label?new h.TextElem(e.label,!1,s.start,r):""===e.label?void 0:new h.TextElem(t,!1,s.start,r)}get text(){const t=this.territory,{padding:e}=t.area,s=t.start.move(e.left,e.top),r=this.appearance.text||this.appearance.t;return r?new h.TextElem(r,!1,s,this.style.textAttrs):void 0}get attrs(){const{x:t,y:e}=this.territory.start,{width:s,height:i}=this.territory.area,n=Object.assign(Object.assign({},this.style.shapeAttrs.svgAttrs),{x:t,y:e,width:s,height:i});return r.SecureSvgAttrs.of(u.asString(n))}elem(t,e){const s=this.appearance.visibility;if(s&&"visible"!==s&&"hidden"!==s)throw new Error("not supported: "+s);return{className:e,d:void 0,icon:this.appearance.icon,id:t,label:this.label(t),secureAttrs:this.attrs,text:this.text,visibility:s}}},e.createElem=function(t,e,s){if(s.appearance.icon){const r=s.elem(t,e);return i.VIcon.of(r)}if(!s.appearance.shape){const r=s.elem(t,e);return n.Box.of(r)}switch(s.appearance.shape){case"box":const r=s.elem(t,e);return n.Box.of(r);case"cylinder":return new a.Cylinder(t,e,s).elem;case"person":return new c.Person(t,e,s).elem;case"pipe":return new l.Pipe(t,e,s).elem;default:throw new Error("not implemented: "+s.appearance.shape)}},e.createArrow=function(t,e,s,r){switch(s.appearance.shape){case"arrow":return new o.Arrow(t,e,s,r).arrow;case"edge":return new o.Arrow(t,e,s,r).edge;default:throw new Error("not implemented: "+s.appearance.shape)}}},267:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateIcon=e.validatedShape=e.validatedVisibility=e.validateAppearance=e.SecureSvgAttrs=void 0;const r=s(179);class i{constructor(t){this.svgAttrs=t}static of(t){return Object.keys(t).forEach(e=>{const s=t[e];if(r=e,i=s,!h.has(r)||!function(t){return/^[0-9a-zA-Z\s\-_.,%]*$/.test(t)||/^#[0-9a-fA-F]{3}$/.test(e=t)||/^#[0-9a-fA-F]{6}$/.test(e)||!isNaN(Number(t));var e}(i))throw new Error(`Sorry, the attribute is not used for security reason: ${e} => ${s}`);var r,i}),new i(t)}}function n(t){if("visible"!==t&&"hidden"!==t)throw new Error("Sorry, the attribute is not used for security reason: visibility => "+t);return t}function o(t){switch(t){case"arrow":case"edge":case"box":case"cylinder":case"person":case"pipe":return t;default:throw new Error("Sorry, the attribute is not used for security reason: shape => "+t)}}function a(t){if(/^[0-9a-zA-Z\-\/]*$/.test(t))return t;throw new Error("Sorry, the attribute is not used for security reason: shape => "+t)}e.SecureSvgAttrs=i,e.validateAppearance=function(t){const{visibility:e,shape:s,icon:i}=t;r.m(n,e),r.m(o,s),r.m(a,i)},e.validatedVisibility=n,e.validatedShape=o,e.validateIcon=a;const h=new Set(["cx","cy","d","dx","dy","fill","font-family","font-size","font-stretch","font-style","font-variant","font-weight","fx","fy","height","lengthAdjust","markerHeight","markerUnits","markerWidth","method","orient","overline-position","overline-thickness","pathLength","rx","ry","slope","spreadMethod","textLength","underline-position","underline-thickness","viewBox","width","x","y","alignment-baseline","baseline-shift","color","display","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-size-adjust","kerning","letter-spacing","lighting-color","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","visibility","word-spacing","writing-mode"])},268:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiply=e.Vector2d=void 0;class r{constructor(t,e,s,r){this.x1=t,this.y1=e,this.x2=s,this.y2=r}get length(){return Math.sqrt(Math.pow(this.dx,2)+Math.pow(this.dy,2))}get dx(){return this.x2-this.x1}get dy(){return this.y2-this.y1}rotate(t){const e=this.x1,s=this.y1,n=t*Math.PI/180;const o={real:Math.cos(n),imaginary:Math.sin(n)},a=i({real:this.dx,imaginary:this.dy},o);return new r(e,s,e+a.real,s+a.imaginary)}negate(){const t=this.x1,e=this.y1;return new r(t,e,t-this.dx,e-this.dy)}reverse(){return new r(this.x2,this.y2,this.x1,this.y1)}move(t,e){return new r(this.x1+t,this.y1+e,this.x2+t,this.y2+e)}normalize(){const t=this.length;return new r(0,0,this.dx/t,this.dy/t)}multiple(t){const e=this.x1,s=this.y1;return new r(e,s,e+this.dx*t,s+this.dy*t)}}function i(t,e){return{real:t.real*e.real-t.imaginary*e.imaginary,imaginary:t.real*e.imaginary+t.imaginary*e.real}}e.Vector2d=r,e.multiply=i},269:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=e.Engine=void 0;const r=s(170);e.Engine=class{constructor(t){this.config=t}fitRoot(t){const e=t.fit(this);t.refit(this,e.totalSize)}fit(t,e){if(0===t.length)return r.Boundary.zero;const s=this.direction(e);if("row"===s)return t.reduce((t,e)=>{const s=e.fit(this),{width:i,height:n}=s.totalSize;return new r.Boundary(t.width.add(i),r.Length.max(t.height,n))},r.Boundary.zero);if("column"===s)return t.reduce((t,e)=>{const s=e.fit(this),{width:i,height:n}=s.totalSize;return new r.Boundary(r.Length.max(t.width,i),t.height.add(n))},r.Boundary.zero);throw new Error("direction not supported: "+s)}refit(t,e,s){if(0!==t.length)if("space-around"===e["justify-content"]){const i=this.direction(e);if("row"===i){const i=t.reduce((t,e)=>{const{width:s,height:i}=e.totalSize;return new r.Boundary(t.width.add(s),r.Length.max(t.height,i))},r.Boundary.zero),n=s.diff(i).div(t.length);t.reduce((t,i)=>{const o=new r.Point(t,r.Length.zero),a=new r.Boundary(i.totalSize.add(n).width,s.height),h=i.refit(this,a),c=this.move(h,o,a,e);return i.populate(c),t.add(a.width)},r.Length.zero)}else{if("column"!==i)throw new Error("not implemented");{const i=t.reduce((t,e)=>{const{width:s,height:i}=e.totalSize;return new r.Boundary(r.Length.max(t.width,s),t.height.add(i))},r.Boundary.zero),n=s.diff(i).div(t.length);t.reduce((t,i)=>{const o=new r.Point(r.Length.zero,t),a=new r.Boundary(s.width,i.totalSize.add(n).height),h=i.refit(this,a),c=this.move(h,o,a,e);return i.populate(c),t.add(a.height)},r.Length.zero)}}}else if("start"===e["justify-content"]){const i=this.direction(e);if("row"===i)t.reduce((t,i)=>{const n=new r.Point(t,r.Length.zero),o=new r.Boundary(i.totalSize.width,s.height),a=i.refit(this,o),h=this.move(a,n,o,e);return i.populate(h),t.add(o.width)},r.Length.zero);else{if("column"!==i)throw new Error("not implemented");t.reduce((t,i)=>{const n=new r.Point(r.Length.zero,t),o=new r.Boundary(s.width,i.totalSize.height),a=i.refit(this,o),h=this.move(a,n,o,e);return i.populate(h),t.add(o.height)},r.Length.zero)}}else if("space-around"!==e["justify-content"])throw new Error("not implemented")}move(t,e,s,i){const{top:n,left:o}=t.margin,{padding:a,margin:h}=t,c=s.diff(t.base),l=this.direction(i);if("column"===l)switch(i["align-items"]){case"flex-start":return new r.Territory(new r.Point(e.x.add(o),e.y.add(c.top)),t);case"stretch":return new r.Territory(new r.Point(e.x.add(o),e.y.add(n)),r.Area.of(s.sub(c),a,h));case"center":return new r.Territory(new r.Point(e.x.add(c.left),e.y.add(c.top)),t);default:throw new Error("not implemented")}else{if("row"!==l)throw new Error("not implemented");switch(i["align-items"]){case"flex-start":return new r.Territory(new r.Point(e.x.add(c.left),e.y.add(n)),t);case"stretch":return new r.Territory(new r.Point(e.x.add(o),e.y.add(n)),r.Area.of(s.sub(c),a,h));case"center":return new r.Territory(new r.Point(e.x.add(c.left),e.y.add(c.top)),t);default:throw new Error("not implemented")}}}direction(t){switch(this.config.orientation){case"portrait":return t["flex-direction"];case"landscape":if("row"===t["flex-direction"])return"column";if("column"===t["flex-direction"])return"row";throw new Error("not implemented");default:throw new Error("not implemented")}}};class i{constructor(t,e,s,i){this.id=t,this.children=e,this.style=s,this.requested=i,this.base=r.Point.zero}static of(t,e,s,n){return new i(t,e,s,r.Area.parse(n))}get area(){if(this.fitArea)return this.fitArea;throw new Error("internal error: unexpected call")}get totalSize(){return this.area.totalSize}fit(t){const e=t.fit(this.children,this.style),{width:s,height:i,padding:n,margin:o}=Object.assign({padding:r.Gap.zero,margin:r.Gap.zero},this.requested),a=e.add(n);return this.fitArea=new r.Area(s||a.width,i||a.height,n,o),this.fitArea}refit(t,e){const{width:s,height:i,padding:n,margin:o}=Object.assign({padding:r.Gap.zero,margin:r.Gap.zero},this.requested),a=e.sub(o);return this.fitArea=new r.Area(s||a.width,i||a.height,n,o),t.refit(this.children,this.style,this.fitArea.contentSize),this.fitArea}populate(t){this.base=t.start,this.fitArea=t.area}flatten(t){const e=t.add(this.base),s=this.children.reduce((t,s)=>Object.assign(Object.assign({},t),s.flatten(e.addGap(this.area.padding))),{});return Object.assign({[this.id]:new r.Territory(e,this.area)},s)}}e.Box=i},270:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Edge=void 0;const r=s(179),i=s(170),n=s(371),o=s(266),a=s(265);class h{constructor(t,e,s,r,i=[],n){this.from=t,this.op=e,this.to=s,this.id=r,this.classNames=i,this.attrs=n}static of(t,e,s,r={}){const i=["edge",this.className(t,e,s)];return r.class&&i.push(...r.class.split(" ")),new h(t,e,s,r.id||this.idName(t,e,s),i,r)}static idName(t,e,s){return`_furumai_${t}_${this.connectorName(e)}_${s}`}static className(t,e,s){return`_furumai_${t}_${this.connectorName(e)}_${s}`}static connectorName(t){switch(t){case"->":return"to";case"--":return"edge";default:throw new Error("not implemented")}}visible(){this.attrs.visibility="visible"}hide(){this.attrs.visibility="hidden"}update(t){this.attrs=Object.assign(Object.assign({},this.attrs),t._attrs)}resolveStyle(t){const e={id:this.id,classNames:this.classNames},s=t.query(e),r=t.query({classNames:["label"],parent:e}),i=t.query({classNames:["text"],parent:e}),n=this.attrs.class;n&&(this.classNames.push(n),delete this.attrs.class),Object.keys(this.attrs).forEach(t=>{t.startsWith("text.")&&(i[t.substring("text.".length)]=this.attrs[t],delete this.attrs[t])}),Object.keys(this.attrs).forEach(t=>{if(t.startsWith("label.")){const e=t.substring("label.".length);r[e]=this.attrs[t],delete this.attrs[t]}});const o=a.ElemStyle.of(r,i,Object.assign(Object.assign({},s),this.attrs));return c.of(this.id,this.classNames,o)}same(t){return this.from===t.from&&this.op===t.op&&this.to===t.to}updateEdge(t){this.attrs=Object.assign(Object.assign({},this.attrs),t.attrs)}}e.Edge=h;class c{constructor(t,e,s,r,i,n){this.id=t,this.classNames=e,this.arrowStyle=s,this.appearance=r,this.svgStyle=i,this.textAttrs=n}static of(t,e,s){const i=s.shapeAttrs,n={dx:s.textAttrs.dx||i["text.dx"],dy:s.textAttrs.dy||i["text.dy"]},{dx:o,dy:a}=i;return new c(t,e,r.deleteUndefined({dx:o,dy:a}),s.shapeAttrs,s.toSvgStyle(),r.deleteUndefined(n))}arrow(t,e,s,r){const{dx:h,dy:c}=this.arrowStyle,l=n.Arrow.fit(t,s,i.Length.parse(h||"0px").pixel,i.Length.parse(c||"0px").pixel),u=new o.Shape(l,Object.assign({shape:"--"===e?"edge":"arrow"},this.appearance),r?this.svgStyle:a.ElemStyle.empty.toSvgStyle());return o.createArrow(this.id,this.classNames.join(" "),u,this.textAttrs)}}},271:function(t,e,s){},272:function(t,e,s){},275:function(t,e,s){"use strict";s.r(e);var r=s(382),i=s(207);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s(373);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);e.default=a.exports},276:function(t,e,s){"use strict";s.r(e);var r=s(383),i=s(209);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,"6604a666",null);e.default=a.exports},277:function(t,e,s){"use strict";s.r(e);var r=s(384),i=s(211);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,"d7adae7a",null);e.default=a.exports},278:function(t,e,s){"use strict";s.r(e);var r=s(385),i=s(213);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,"51ba19c0",null);e.default=a.exports},279:function(t,e,s){"use strict";s.r(e);var r=s(386),i=s(215);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,"737e1160",null);e.default=a.exports},280:function(t,e,s){"use strict";s.r(e);var r=s(387),i=s(217);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,"cb826b6c",null);e.default=a.exports},285:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertSvg=void 0;const r=s(380),i=document;let n=new r.RoughSVG(document.createElementNS("http://www.w3.org/2000/svg","svg"));function o(t){const e={},s=t.attributes;for(let t=0;t<s.length;t++){const r=s.item(t);if(!r)throw new Error("null");e[r.name.replace(/[-_](.)/g,(t,e)=>e.toUpperCase())]=r.value,e[r.name]=r.value}return e}function a(t,e){return Object.keys(e).forEach(s=>t.setAttribute(s,e[s])),t}function h(t,e){switch(t.tagName){case"g":const s=a(i.createElementNS("http://www.w3.org/2000/svg","g"),o(t)),r=t.children;for(let t=0;t<r.length;t++){const i=r.item(t);if(!i)throw new Error("null");s.append(h(i,e))}return s;case"text":const n=a(i.createElementNS("http://www.w3.org/2000/svg","text"),o(t)),c=t.children;for(let t=0;t<c.length;t++){const s=c.item(t);if(!s)throw new Error("null");n.append(h(s,e))}return n;case"tspan":const u=a(i.createElementNS("http://www.w3.org/2000/svg","tspan"),o(t));return u.textContent=t.textContent,u;case"svg":const d=l(t),_=t.children;for(let t=0;t<_.length;t++){const e=_.item(t);if(!e)throw new Error("null");d.append(h(e,l))}return d;default:return e(t)}}function c(t){if(t.classList.contains("no_rough"))return l(t);const e=a(i.createElementNS("http://www.w3.org/2000/svg","g"),o(t));return e.appendChild(function(t){const e=t.tagName,s=o(t),r=Object.assign({hachureGap:2,fillWeight:.6,roughness:2},s);switch(e){case"path":return n.path(s.d,s);case"line":return n.line(parseFloat(s.x1),parseFloat(s.y1),parseFloat(s.x1),parseFloat(s.y2),r);case"rect":return n.rectangle(parseFloat(s.x),parseFloat(s.y),parseFloat(s.width),parseFloat(s.height),r);case"ellipse":return n.ellipse(parseFloat(s.cx),parseFloat(s.cy),parseFloat(s.rx),parseFloat(s.ry),r);case"circle":return n.circle(parseFloat(s.cx),parseFloat(s.cy),parseFloat(s.r),r);case"polygon":throw new Error("not implemented");default:throw new Error("not implemented: "+e)}}(t)),e}function l(t){return a(i.createElementNS("http://www.w3.org/2000/svg",t.tagName),o(t))}e.convertSvg=function(t){const e=t.getAttribute("width")||0,s=t.getAttribute("height")||0,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:svgns","http://www.w3.org/2000/svg"),i.setAttribute("width",""+e),i.setAttribute("height",""+s),i.setAttribute("viewBox",`0 0 ${2*Number(e)} ${2*Number(s)}`),n=new r.RoughSVG(i);const o=t.children;for(let t=0;t<o.length;t++){const e=o.item(t);if(!e)throw new Error("null");"svgns:style"===e.tagName?i.append(e):i.append(h(e,c))}return i}},286:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SingleGroup=e.toSvgModels=e.defaultString=void 0;const r=s(287),i=s(269),n=s(170);function o(t){const s=r.parse(e.defaultString);return r.parse(t).withDefault(s.config,s.layout.styles)}function a(t,e,s){const r=e.styles,i=e.root.resolveStyle(r,e.root.contextMap),o=i.layoutBox();t.fitRoot(o);const a=o.flatten(n.Point.zero),h=!s.css,c=i.shape(a,h),l=e.edges.map(t=>{const e=a[t.from],s=a[t.to];return{elem:t.resolveStyle(r).arrow(e,t.op,s,h),children:[]}});return c.children.push(...l),{styles:h?"":r.toCss(),size:o.totalSize,root:c}}e.defaultString='config {\n  mode: diff;\n  // mode: snapshot;\n  orientation: portrait;\n  // orientation: landscape;\n};\n\nstyle {\n  #root {\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-around;\n\n    stroke: none;\n    padding: 16px;\n    fill: none;\n  }\n  .group, .zone {\n    align-items: center;\n    justify-content: space-around;\n\n    fill: none;\n    padding: 18px;\n    margin: 24px;\n    stroke: none;\n  }\n  .group {\n    flex-direction: row;\n  }\n  .zone {\n    flex-direction: column;\n  }\n  .edge {\n    stroke: black;\n    label: "";\n  }\n  .node {\n    stroke: black;\n    width: 100px;\n    height: 60px;\n    padding: 18px 7px;\n    margin: 20px;\n    fill: none;\n  }\n  .icon {\n    stroke: none;\n    fill: black;\n  }\n  .text, .label {\n    visibility: inherit;\n    font-size: 9pt;\n  }\n  .text {\n    dy: 5px;\n  }\n  .label {\n    dy: -14px;\n  }\n};\n',e.toSvgModels=function(t){const e=o(t),s=e.config;let r=e.layout;const n=new i.Engine(s),h=[a(n,r,s)];for(const i of e.updates)"diff"===s.mode?(r=r.update(i),h.push(a(n,r,s))):(r=o(t).layout.update(i),h.push(a(n,r,s)));return h};e.SingleGroup=class{constructor(t){this.elem=t,this.children=[]}}},287:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0;const r=s(288),i=s(361),n=s(362),o=s(363),a=s(265),h=s(270),c=s(372),l=s(179);e.parse=function(t){const e=r.CharStreams.fromString(t),s=new u,o=new n.FurumaiLexer(e);o.removeErrorListeners(),o.addErrorListener(s);const a=new r.CommonTokenStream(o),h=new i.FurumaiParser(a);h.removeErrorListeners(),h.addErrorListener(s);const c=h.story();if(s.errors.length>0)throw new SyntaxError(JSON.stringify(s.errors));return(new d).visit(c)};class u{constructor(){this.errors=[]}syntaxError(t,e,s,r,i,n){const o={message:i,range:{at:{column:r,row:s}}};this.errors.push(o)}}class d{visitStory(t){if(t.EOF()){const e=t.config(),s=e?this.visit(e):{},r=this.visit(t.layout()),i=t.update().map(t=>this.visit(t));return new o.Story(s,r,i)}throw new SyntaxError("invalid input statement syntax")}visitConfig(t){const e=t.declaration().map(t=>this.visit(t));return _.reduce(e)}visitLayout(t){const e=this.visit(t.stmt_list());if(e.hides.length>0)throw new Error("not supported hide in layout");const s=e.assigns.reduce((t,e)=>Object.assign(Object.assign({},t),{[e.key]:e.value}),{});return new o.Layout(a.Elem.of("root","root",Object.assign({label:""},s),e.elems),e.edges,p.flatten(e.styles))}visitUpdate(t){const e=this.visit(t.stmt_list());if(e.assigns.length>0)throw new Error("not implemented top level assignment");return new o.Update(e.elems,e.edges,e.hides,p.flatten(e.styles))}visitStmt_list(t){const e=t.stmt().map(t=>this.visit(t)),s=[],r=[],i=[],n=[],o=[];return e.forEach(t=>{t instanceof h.Edge?r.push(t):t instanceof c.Hide?i.push(t):t instanceof _?n.push(t):t instanceof p?o.push(t):t instanceof f||s.push(t)}),{elems:s,edges:r,hides:i,assigns:n,styles:o}}visitStmt(t){const e=t.group()||t.zone()||t.node_stmt()||t.edge_stmt()||t.hide()||t.declaration()||t.style()||t.semi_colon();if(e)return this.visit(e);throw new Error("not implemented")}visitGroup(t){return this.compound(t.stmt_list(),t.ID().text,"group")}visitZone(t){return this.compound(t.stmt_list(),t.ID().text,"zone")}compound(t,e,s){if(t){const r=this.visit(t);if(r.styles.length>0)throw new Error("not implemented inner style description");if(r.edges.length>0)throw new Error("not implemented inner edge description");if(r.hides.length>0)throw new Error("not implemented inner hide description");return a.Elem.of(e,s,_.reduce(r.assigns),r.elems)}return a.Elem.of(e,s)}visitNode_stmt(t){const e=t.attr_list();if(e){const s=_.reduce(this.visit(e));return a.Elem.of(t.ID().text,"node",s)}return a.Elem.of(t.ID().text,"node")}visitEdge_stmt(t){const e=t.ID().map(t=>t.text),s=t.attr_list();if(s){const r=_.reduce(this.visit(s));return h.Edge.of(e[0],t.EDGEOP().text,e[1],r)}return h.Edge.of(e[0],t.EDGEOP().text,e[1])}visitHide(t){const e=t.hide_elem(),s=t.hide_edge();if(e)return this.visit(e);if(s)return this.visit(s);throw new Error("not implemented")}visitHide_elem(t){return c.Hide.elem(t.ID().text)}visitHide_edge(t){const e=t.ID().map(t=>t.text);return c.Hide.edge(e[0],t.EDGEOP().text,e[1])}visitAttr_list(t){return t.declaration().map(t=>{const e=t.val().map(t=>this.visit(t)),s=t.ID().text+t.DOT().reduce((t,e)=>t+e.text,"");return new _(s,e.join(" "))})}visitVal(t){const e=t.ID()||t.HASH()||t.STRING();if(e)return e.text;throw new Error("not implemented")}visitStyle(t){const e=t.css_stmt().map(t=>this.visit(t));return new p(e)}visitCss_stmt(t){const e=this.visit(t.selector_list()),s=t.declaration().map(t=>this.visit(t));return l.Ruleset.of(e,_.reduce(s))}visitSelector_list(t){return t.selector().map(t=>this.visit(t))}visitSelector(t){const e=t.combined_selector().map(t=>this.visit(t)),s=this.visit(t.basic_selector());return l.Selector.combined(e,s)}visitCombined_selector(t){const e=t.combinator(),s=e?this.visit(e):new l.DescendantCombinator,r=this.visit(t.basic_selector());return new l.CombinedSelector(r,s)}visitCombinator(t){return new l.ChildCombinator}visitBasic_selector(t){const e=t.univ_selector()||t.type_selector()||t.class_selector()||t.id_selector()||t.edge_selector();if(e)return this.visit(e);throw new Error("not implemented")}visitUniv_selector(t){return new l.UnivSelector}visitType_selector(t){throw new Error("type selector is not implemented")}visitClass_selector(t){return l.ClassSelector.of(t.DOT().text)}visitId_selector(t){return l.IdSelector.of(t.HASH().text)}visitEdge_selector(t){const e=t.ID().map(t=>t.text);return new l.ClassSelector(h.Edge.className(e[0],t.EDGEOP().text,e[1]))}visitDeclaration(t){const e=t.val().map(t=>this.visit(t));return new _(t.ID().text,e.join(" "))}visitSemi_colon(t){return new f}visit(t){return t.accept(this)}visitChildren(t){let e;const s=t.childCount;for(let r=0;r<s;r++){e=t.getChild(r).accept(this)}return e}visitErrorNode(t){}visitTerminal(t){}}class _{constructor(t,e){this.key=t,this.value=e}static reduce(t){return t.reduce((t,e)=>(t[e.key]=e.value,t),{})}}class p{constructor(t){this.rules=t}static flatten(t){const e=t.reduce((t,e)=>(t.push(...e.rules),t),[]);return l.StyleList.of(e)}}class f{}},361:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Semi_colonContext=e.ValContext=e.DeclarationContext=e.Edge_selectorContext=e.Id_selectorContext=e.Class_selectorContext=e.Type_selectorContext=e.Univ_selectorContext=e.Basic_selectorContext=e.CombinatorContext=e.Combined_selectorContext=e.SelectorContext=e.Selector_listContext=e.Css_stmtContext=e.StyleContext=e.Hide_edgeContext=e.Hide_elemContext=e.HideContext=e.Attr_listContext=e.Edge_stmtContext=e.Node_stmtContext=e.ZoneContext=e.GroupContext=e.StmtContext=e.Stmt_listContext=e.UpdateContext=e.LayoutContext=e.ConfigContext=e.StoryContext=e.FurumaiParser=void 0;const r=s(166),i=s(169),n=s(203),o=s(202),a=s(192),h=s(165),c=s(193),l=s(173),u=s(159),d=s(178),_=r.__importStar(s(168));class p extends a.Parser{constructor(t){super(t),this._interp=new c.ParserATNSimulator(p._ATN,this)}get vocabulary(){return p.VOCABULARY}get grammarFileName(){return"Furumai.g4"}get ruleNames(){return p.ruleNames}get serializedATN(){return p._serializedATN}story(){let t,e=new f(this._ctx,this.state);this.enterRule(e,0,p.RULE_story);try{let s;for(this.enterOuterAlt(e,1),this.state=59,this._errHandler.sync(this),t=this._input.LA(1),t===p.T__1&&(this.state=58,this.config()),this.state=61,this.layout(),this.state=66,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,1,this._ctx);2!==s&&s!==i.ATN.INVALID_ALT_NUMBER;)1===s&&(this.state=62,this.match(p.T__0),this.state=63,this.update()),this.state=68,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,1,this._ctx);this.state=70,this._errHandler.sync(this),t=this._input.LA(1),t===p.T__0&&(this.state=69,this.match(p.T__0)),this.state=72,this.match(p.EOF)}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}config(){let t,e=new x(this._ctx,this.state);this.enterRule(e,2,p.RULE_config);try{let s;for(this.enterOuterAlt(e,1),this.state=74,this.match(p.T__1),this.state=75,this.match(p.T__2),this.state=77,this._errHandler.sync(this),t=this._input.LA(1),t===p.ID&&(this.state=76,this.declaration()),this.state=83,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,4,this._ctx);2!==s&&s!==i.ATN.INVALID_ALT_NUMBER;)1===s&&(this.state=79,this.match(p.T__3),this.state=80,this.declaration()),this.state=85,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,4,this._ctx);this.state=87,this._errHandler.sync(this),t=this._input.LA(1),t===p.T__3&&(this.state=86,this.match(p.T__3)),this.state=89,this.match(p.T__4)}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}layout(){let t=new m(this._ctx,this.state);this.enterRule(t,4,p.RULE_layout);try{this.enterOuterAlt(t,1),this.state=91,this.stmt_list()}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}update(){let t=new g(this._ctx,this.state);this.enterRule(t,6,p.RULE_update);try{this.enterOuterAlt(t,1),this.state=93,this.stmt_list()}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}stmt_list(){let t,e=new v(this._ctx,this.state);this.enterRule(e,8,p.RULE_stmt_list);try{for(this.enterOuterAlt(e,1),this.state=98,this._errHandler.sync(this),t=this._input.LA(1);0==(-32&t)&&0!=(1<<t&(1<<p.T__3|1<<p.T__5|1<<p.T__6|1<<p.T__10|1<<p.T__11|1<<p.ID));)this.state=95,this.stmt(),this.state=100,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}stmt(){let t=new y(this._ctx,this.state);this.enterRule(t,10,p.RULE_stmt);try{switch(this.state=109,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,7,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=101,this.group();break;case 2:this.enterOuterAlt(t,2),this.state=102,this.zone();break;case 3:this.enterOuterAlt(t,3),this.state=103,this.node_stmt();break;case 4:this.enterOuterAlt(t,4),this.state=104,this.edge_stmt();break;case 5:this.enterOuterAlt(t,5),this.state=105,this.hide();break;case 6:this.enterOuterAlt(t,6),this.state=106,this.declaration();break;case 7:this.enterOuterAlt(t,7),this.state=107,this.style();break;case 8:this.enterOuterAlt(t,8),this.state=108,this.semi_colon()}}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}group(){let t=new w(this._ctx,this.state);this.enterRule(t,12,p.RULE_group);try{this.enterOuterAlt(t,1),this.state=111,this.match(p.T__5),this.state=112,this.match(p.ID),this.state=113,this.match(p.T__2),this.state=114,this.stmt_list(),this.state=115,this.match(p.T__4)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}zone(){let t=new b(this._ctx,this.state);this.enterRule(t,14,p.RULE_zone);try{this.enterOuterAlt(t,1),this.state=117,this.match(p.T__6),this.state=118,this.match(p.ID),this.state=119,this.match(p.T__2),this.state=120,this.stmt_list(),this.state=121,this.match(p.T__4)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}node_stmt(){let t=new E(this._ctx,this.state);this.enterRule(t,16,p.RULE_node_stmt);try{switch(this.state=127,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,8,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=123,this.match(p.ID),this.state=124,this.match(p.T__3);break;case 2:this.enterOuterAlt(t,2),this.state=125,this.match(p.ID),this.state=126,this.attr_list()}}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}edge_stmt(){let t=new R(this._ctx,this.state);this.enterRule(t,18,p.RULE_edge_stmt);try{switch(this.state=137,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,9,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=129,this.match(p.ID),this.state=130,this.match(p.EDGEOP),this.state=131,this.match(p.ID),this.state=132,this.match(p.T__3);break;case 2:this.enterOuterAlt(t,2),this.state=133,this.match(p.ID),this.state=134,this.match(p.EDGEOP),this.state=135,this.match(p.ID),this.state=136,this.attr_list()}}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}attr_list(){let t,e=new C(this._ctx,this.state);this.enterRule(e,20,p.RULE_attr_list);try{let s;switch(this.state=157,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,13,this._ctx)){case 1:for(this.enterOuterAlt(e,1),this.state=139,this.match(p.T__7),this.state=140,this.declaration(),this.state=147,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,11,this._ctx);2!==s&&s!==i.ATN.INVALID_ALT_NUMBER;)1===s&&(this.state=142,this._errHandler.sync(this),t=this._input.LA(1),t!==p.T__3&&t!==p.T__8||(this.state=141,t=this._input.LA(1),t!==p.T__3&&t!==p.T__8?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())),this.state=144,this.declaration()),this.state=149,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,11,this._ctx);this.state=151,this._errHandler.sync(this),t=this._input.LA(1),t!==p.T__3&&t!==p.T__8||(this.state=150,t=this._input.LA(1),t!==p.T__3&&t!==p.T__8?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())),this.state=153,this.match(p.T__9);break;case 2:this.enterOuterAlt(e,2),this.state=155,this.match(p.T__7),this.state=156,this.match(p.T__9)}}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}hide(){let t=new S(this._ctx,this.state);this.enterRule(t,22,p.RULE_hide);try{switch(this.state=161,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,14,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=159,this.hide_elem();break;case 2:this.enterOuterAlt(t,2),this.state=160,this.hide_edge()}}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}hide_elem(){let t=new A(this._ctx,this.state);this.enterRule(t,24,p.RULE_hide_elem);try{this.enterOuterAlt(t,1),this.state=163,this.match(p.T__10),this.state=164,this.match(p.ID),this.state=165,this.match(p.T__3)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}hide_edge(){let t=new T(this._ctx,this.state);this.enterRule(t,26,p.RULE_hide_edge);try{this.enterOuterAlt(t,1),this.state=167,this.match(p.T__10),this.state=168,this.match(p.ID),this.state=169,this.match(p.EDGEOP),this.state=170,this.match(p.ID),this.state=171,this.match(p.T__3)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}style(){let t,e=new L(this._ctx,this.state);this.enterRule(e,28,p.RULE_style);try{for(this.enterOuterAlt(e,1),this.state=173,this.match(p.T__11),this.state=174,this.match(p.T__2),this.state=178,this._errHandler.sync(this),t=this._input.LA(1);0==(-32&t)&&0!=(1<<t&(1<<p.T__13|1<<p.ID|1<<p.HASH|1<<p.DOT));)this.state=175,this.css_stmt(),this.state=180,this._errHandler.sync(this),t=this._input.LA(1);this.state=181,this.match(p.T__4)}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}css_stmt(){let t,e=new O(this._ctx,this.state);this.enterRule(e,30,p.RULE_css_stmt);try{let s;for(this.enterOuterAlt(e,1),this.state=183,this.selector_list(),this.state=184,this.match(p.T__2),this.state=186,this._errHandler.sync(this),t=this._input.LA(1),t===p.ID&&(this.state=185,this.declaration()),this.state=192,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,17,this._ctx);2!==s&&s!==i.ATN.INVALID_ALT_NUMBER;)1===s&&(this.state=188,t=this._input.LA(1),t!==p.T__3&&t!==p.T__8?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=189,this.declaration()),this.state=194,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,17,this._ctx);this.state=196,this._errHandler.sync(this),t=this._input.LA(1),t!==p.T__3&&t!==p.T__8||(this.state=195,t=this._input.LA(1),t!==p.T__3&&t!==p.T__8?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())),this.state=198,this.match(p.T__4)}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}selector_list(){let t,e=new H(this._ctx,this.state);this.enterRule(e,32,p.RULE_selector_list);try{let s;for(this.enterOuterAlt(e,1),this.state=200,this.selector(),this.state=205,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,19,this._ctx);2!==s&&s!==i.ATN.INVALID_ALT_NUMBER;)1===s&&(this.state=201,this.match(p.T__8),this.state=202,this.selector()),this.state=207,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,19,this._ctx);this.state=209,this._errHandler.sync(this),t=this._input.LA(1),t===p.T__8&&(this.state=208,this.match(p.T__8))}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}selector(){let t=new D(this._ctx,this.state);this.enterRule(t,34,p.RULE_selector);try{let e;for(this.enterOuterAlt(t,1),this.state=214,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,21,this._ctx);2!==e&&e!==i.ATN.INVALID_ALT_NUMBER;)1===e&&(this.state=211,this.combined_selector()),this.state=216,this._errHandler.sync(this),e=this.interpreter.adaptivePredict(this._input,21,this._ctx);this.state=217,this.basic_selector()}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}combined_selector(){let t,e=new N(this._ctx,this.state);this.enterRule(e,36,p.RULE_combined_selector);try{this.enterOuterAlt(e,1),this.state=219,this.basic_selector(),this.state=221,this._errHandler.sync(this),t=this._input.LA(1),t===p.T__12&&(this.state=220,this.combinator())}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}combinator(){let t=new I(this._ctx,this.state);this.enterRule(t,38,p.RULE_combinator);try{this.enterOuterAlt(t,1),this.state=223,this.match(p.T__12)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}basic_selector(){let t=new P(this._ctx,this.state);this.enterRule(t,40,p.RULE_basic_selector);try{switch(this.state=230,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,23,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=225,this.univ_selector();break;case 2:this.enterOuterAlt(t,2),this.state=226,this.type_selector();break;case 3:this.enterOuterAlt(t,3),this.state=227,this.class_selector();break;case 4:this.enterOuterAlt(t,4),this.state=228,this.id_selector();break;case 5:this.enterOuterAlt(t,5),this.state=229,this.edge_selector()}}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}univ_selector(){let t=new $(this._ctx,this.state);this.enterRule(t,42,p.RULE_univ_selector);try{this.enterOuterAlt(t,1),this.state=232,this.match(p.T__13)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}type_selector(){let t=new U(this._ctx,this.state);this.enterRule(t,44,p.RULE_type_selector);try{this.enterOuterAlt(t,1),this.state=234,this.match(p.ID)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}class_selector(){let t=new k(this._ctx,this.state);this.enterRule(t,46,p.RULE_class_selector);try{this.enterOuterAlt(t,1),this.state=236,this.match(p.DOT)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}id_selector(){let t=new j(this._ctx,this.state);this.enterRule(t,48,p.RULE_id_selector);try{this.enterOuterAlt(t,1),this.state=238,this.match(p.HASH)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}edge_selector(){let t=new M(this._ctx,this.state);this.enterRule(t,50,p.RULE_edge_selector);try{this.enterOuterAlt(t,1),this.state=240,this.match(p.ID),this.state=241,this.match(p.EDGEOP),this.state=242,this.match(p.ID)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}declaration(){let t,e=new z(this._ctx,this.state);this.enterRule(e,52,p.RULE_declaration);try{let s;for(this.enterOuterAlt(e,1),this.state=244,this.match(p.ID),this.state=248,this._errHandler.sync(this),t=this._input.LA(1);t===p.DOT;)this.state=245,this.match(p.DOT),this.state=250,this._errHandler.sync(this),t=this._input.LA(1);this.state=251,t=this._input.LA(1),t!==p.T__14&&t!==p.T__15?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume()),this.state=253,this._errHandler.sync(this),s=1;do{switch(s){case 1:this.state=252,this.val();break;default:throw new o.NoViableAltException(this)}this.state=255,this._errHandler.sync(this),s=this.interpreter.adaptivePredict(this._input,25,this._ctx)}while(2!==s&&s!==i.ATN.INVALID_ALT_NUMBER)}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}val(){let t,e=new G(this._ctx,this.state);this.enterRule(e,54,p.RULE_val);try{this.enterOuterAlt(e,1),this.state=257,t=this._input.LA(1),0!=(-32&t)||0==(1<<t&(1<<p.ID|1<<p.HASH|1<<p.STRING))?this._errHandler.recoverInline(this):(this._input.LA(1)===u.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof l.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}semi_colon(){let t=new F(this._ctx,this.state);this.enterRule(t,56,p.RULE_semi_colon);try{this.enterOuterAlt(t,1),this.state=259,this.match(p.T__3)}catch(e){if(!(e instanceof l.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}static get _ATN(){return p.__ATN||(p.__ATN=(new n.ATNDeserializer).deserialize(_.toCharArray(p._serializedATN))),p.__ATN}}e.FurumaiParser=p,p.T__0=1,p.T__1=2,p.T__2=3,p.T__3=4,p.T__4=5,p.T__5=6,p.T__6=7,p.T__7=8,p.T__8=9,p.T__9=10,p.T__10=11,p.T__11=12,p.T__12=13,p.T__13=14,p.T__14=15,p.T__15=16,p.ID=17,p.HASH=18,p.DOT=19,p.STRING=20,p.EDGEOP=21,p.SPACES=22,p.SINGLE_LINE_COMMENT=23,p.RULE_story=0,p.RULE_config=1,p.RULE_layout=2,p.RULE_update=3,p.RULE_stmt_list=4,p.RULE_stmt=5,p.RULE_group=6,p.RULE_zone=7,p.RULE_node_stmt=8,p.RULE_edge_stmt=9,p.RULE_attr_list=10,p.RULE_hide=11,p.RULE_hide_elem=12,p.RULE_hide_edge=13,p.RULE_style=14,p.RULE_css_stmt=15,p.RULE_selector_list=16,p.RULE_selector=17,p.RULE_combined_selector=18,p.RULE_combinator=19,p.RULE_basic_selector=20,p.RULE_univ_selector=21,p.RULE_type_selector=22,p.RULE_class_selector=23,p.RULE_id_selector=24,p.RULE_edge_selector=25,p.RULE_declaration=26,p.RULE_val=27,p.RULE_semi_colon=28,p.ruleNames=["story","config","layout","update","stmt_list","stmt","group","zone","node_stmt","edge_stmt","attr_list","hide","hide_elem","hide_edge","style","css_stmt","selector_list","selector","combined_selector","combinator","basic_selector","univ_selector","type_selector","class_selector","id_selector","edge_selector","declaration","val","semi_colon"],p._LITERAL_NAMES=[void 0,"'---'","'config'","'{'","';'","'}'","'group'","'zone'","'['","','","']'","'hide'","'style'","'>'","'*'","':'","'='"],p._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"ID","HASH","DOT","STRING","EDGEOP","SPACES","SINGLE_LINE_COMMENT"],p.VOCABULARY=new d.VocabularyImpl(p._LITERAL_NAMES,p._SYMBOLIC_NAMES,[]),p._serializedATN='\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\nC\n\fF\vI\nP\nT\n\fW\vZ\nc\n\ff\vp\n\b\b\b\b\b\b\t\t\t\t\t\t\n\n\n\n\n\n\n\v\v\v\v\v\v\v\v\v\n\v\f\f\f\f\n\f\f\f\n\f\f\f\f\v\f\f\f\n\f\f\f\f\f\f\n\f\r\r\r\n\r\n\f\v\n\n\f\v\n\n\f\v\n\n\f\v\n\n\n\f\v\n\r\b\n\f "$&(*,.02468:\v\v=L]\b_\nd\foqw "$&(*,.02468:<>=<=>>??D@AAC\bB@CFDBDEEHFDGIHGHIIJJKKLMMONP6ONOPPUQRRT6SQTWUSUVVYWUXZYXYZZ[[\\\\]^\n^_`\n`\tac\fbacfdbdee\vfdgp\bhp\tip\njp\vkp\rlp6mpnp:ogohoiojokolomonp\rqr\brssttu\nuvvwx\txyyzz{\n{||}~~\f}\f\n6\t6\t\f\n\f\r\r "6\t6\t!$\v$\v#&*%*(\'),.024+-/135\t87\t9;=DHOUYdo';class f extends h.ParserRuleContext{layout(){return this.getRuleContext(0,m)}EOF(){return this.getToken(p.EOF,0)}config(){return this.tryGetRuleContext(0,x)}update(t){return void 0===t?this.getRuleContexts(g):this.getRuleContext(t,g)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_story}enterRule(t){t.enterStory&&t.enterStory(this)}exitRule(t){t.exitStory&&t.exitStory(this)}accept(t){return t.visitStory?t.visitStory(this):t.visitChildren(this)}}e.StoryContext=f;class x extends h.ParserRuleContext{declaration(t){return void 0===t?this.getRuleContexts(z):this.getRuleContext(t,z)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_config}enterRule(t){t.enterConfig&&t.enterConfig(this)}exitRule(t){t.exitConfig&&t.exitConfig(this)}accept(t){return t.visitConfig?t.visitConfig(this):t.visitChildren(this)}}e.ConfigContext=x;class m extends h.ParserRuleContext{stmt_list(){return this.getRuleContext(0,v)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_layout}enterRule(t){t.enterLayout&&t.enterLayout(this)}exitRule(t){t.exitLayout&&t.exitLayout(this)}accept(t){return t.visitLayout?t.visitLayout(this):t.visitChildren(this)}}e.LayoutContext=m;class g extends h.ParserRuleContext{stmt_list(){return this.getRuleContext(0,v)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_update}enterRule(t){t.enterUpdate&&t.enterUpdate(this)}exitRule(t){t.exitUpdate&&t.exitUpdate(this)}accept(t){return t.visitUpdate?t.visitUpdate(this):t.visitChildren(this)}}e.UpdateContext=g;class v extends h.ParserRuleContext{stmt(t){return void 0===t?this.getRuleContexts(y):this.getRuleContext(t,y)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_stmt_list}enterRule(t){t.enterStmt_list&&t.enterStmt_list(this)}exitRule(t){t.exitStmt_list&&t.exitStmt_list(this)}accept(t){return t.visitStmt_list?t.visitStmt_list(this):t.visitChildren(this)}}e.Stmt_listContext=v;class y extends h.ParserRuleContext{group(){return this.tryGetRuleContext(0,w)}zone(){return this.tryGetRuleContext(0,b)}node_stmt(){return this.tryGetRuleContext(0,E)}edge_stmt(){return this.tryGetRuleContext(0,R)}hide(){return this.tryGetRuleContext(0,S)}declaration(){return this.tryGetRuleContext(0,z)}style(){return this.tryGetRuleContext(0,L)}semi_colon(){return this.tryGetRuleContext(0,F)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_stmt}enterRule(t){t.enterStmt&&t.enterStmt(this)}exitRule(t){t.exitStmt&&t.exitStmt(this)}accept(t){return t.visitStmt?t.visitStmt(this):t.visitChildren(this)}}e.StmtContext=y;class w extends h.ParserRuleContext{ID(){return this.getToken(p.ID,0)}stmt_list(){return this.getRuleContext(0,v)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_group}enterRule(t){t.enterGroup&&t.enterGroup(this)}exitRule(t){t.exitGroup&&t.exitGroup(this)}accept(t){return t.visitGroup?t.visitGroup(this):t.visitChildren(this)}}e.GroupContext=w;class b extends h.ParserRuleContext{ID(){return this.getToken(p.ID,0)}stmt_list(){return this.getRuleContext(0,v)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_zone}enterRule(t){t.enterZone&&t.enterZone(this)}exitRule(t){t.exitZone&&t.exitZone(this)}accept(t){return t.visitZone?t.visitZone(this):t.visitChildren(this)}}e.ZoneContext=b;class E extends h.ParserRuleContext{ID(){return this.getToken(p.ID,0)}attr_list(){return this.tryGetRuleContext(0,C)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_node_stmt}enterRule(t){t.enterNode_stmt&&t.enterNode_stmt(this)}exitRule(t){t.exitNode_stmt&&t.exitNode_stmt(this)}accept(t){return t.visitNode_stmt?t.visitNode_stmt(this):t.visitChildren(this)}}e.Node_stmtContext=E;class R extends h.ParserRuleContext{ID(t){return void 0===t?this.getTokens(p.ID):this.getToken(p.ID,t)}EDGEOP(){return this.getToken(p.EDGEOP,0)}attr_list(){return this.tryGetRuleContext(0,C)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_edge_stmt}enterRule(t){t.enterEdge_stmt&&t.enterEdge_stmt(this)}exitRule(t){t.exitEdge_stmt&&t.exitEdge_stmt(this)}accept(t){return t.visitEdge_stmt?t.visitEdge_stmt(this):t.visitChildren(this)}}e.Edge_stmtContext=R;class C extends h.ParserRuleContext{declaration(t){return void 0===t?this.getRuleContexts(z):this.getRuleContext(t,z)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_attr_list}enterRule(t){t.enterAttr_list&&t.enterAttr_list(this)}exitRule(t){t.exitAttr_list&&t.exitAttr_list(this)}accept(t){return t.visitAttr_list?t.visitAttr_list(this):t.visitChildren(this)}}e.Attr_listContext=C;class S extends h.ParserRuleContext{hide_elem(){return this.tryGetRuleContext(0,A)}hide_edge(){return this.tryGetRuleContext(0,T)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_hide}enterRule(t){t.enterHide&&t.enterHide(this)}exitRule(t){t.exitHide&&t.exitHide(this)}accept(t){return t.visitHide?t.visitHide(this):t.visitChildren(this)}}e.HideContext=S;class A extends h.ParserRuleContext{ID(){return this.getToken(p.ID,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_hide_elem}enterRule(t){t.enterHide_elem&&t.enterHide_elem(this)}exitRule(t){t.exitHide_elem&&t.exitHide_elem(this)}accept(t){return t.visitHide_elem?t.visitHide_elem(this):t.visitChildren(this)}}e.Hide_elemContext=A;class T extends h.ParserRuleContext{ID(t){return void 0===t?this.getTokens(p.ID):this.getToken(p.ID,t)}EDGEOP(){return this.getToken(p.EDGEOP,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_hide_edge}enterRule(t){t.enterHide_edge&&t.enterHide_edge(this)}exitRule(t){t.exitHide_edge&&t.exitHide_edge(this)}accept(t){return t.visitHide_edge?t.visitHide_edge(this):t.visitChildren(this)}}e.Hide_edgeContext=T;class L extends h.ParserRuleContext{css_stmt(t){return void 0===t?this.getRuleContexts(O):this.getRuleContext(t,O)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_style}enterRule(t){t.enterStyle&&t.enterStyle(this)}exitRule(t){t.exitStyle&&t.exitStyle(this)}accept(t){return t.visitStyle?t.visitStyle(this):t.visitChildren(this)}}e.StyleContext=L;class O extends h.ParserRuleContext{selector_list(){return this.getRuleContext(0,H)}declaration(t){return void 0===t?this.getRuleContexts(z):this.getRuleContext(t,z)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_css_stmt}enterRule(t){t.enterCss_stmt&&t.enterCss_stmt(this)}exitRule(t){t.exitCss_stmt&&t.exitCss_stmt(this)}accept(t){return t.visitCss_stmt?t.visitCss_stmt(this):t.visitChildren(this)}}e.Css_stmtContext=O;class H extends h.ParserRuleContext{selector(t){return void 0===t?this.getRuleContexts(D):this.getRuleContext(t,D)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_selector_list}enterRule(t){t.enterSelector_list&&t.enterSelector_list(this)}exitRule(t){t.exitSelector_list&&t.exitSelector_list(this)}accept(t){return t.visitSelector_list?t.visitSelector_list(this):t.visitChildren(this)}}e.Selector_listContext=H;class D extends h.ParserRuleContext{basic_selector(){return this.getRuleContext(0,P)}combined_selector(t){return void 0===t?this.getRuleContexts(N):this.getRuleContext(t,N)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_selector}enterRule(t){t.enterSelector&&t.enterSelector(this)}exitRule(t){t.exitSelector&&t.exitSelector(this)}accept(t){return t.visitSelector?t.visitSelector(this):t.visitChildren(this)}}e.SelectorContext=D;class N extends h.ParserRuleContext{basic_selector(){return this.getRuleContext(0,P)}combinator(){return this.tryGetRuleContext(0,I)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_combined_selector}enterRule(t){t.enterCombined_selector&&t.enterCombined_selector(this)}exitRule(t){t.exitCombined_selector&&t.exitCombined_selector(this)}accept(t){return t.visitCombined_selector?t.visitCombined_selector(this):t.visitChildren(this)}}e.Combined_selectorContext=N;class I extends h.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_combinator}enterRule(t){t.enterCombinator&&t.enterCombinator(this)}exitRule(t){t.exitCombinator&&t.exitCombinator(this)}accept(t){return t.visitCombinator?t.visitCombinator(this):t.visitChildren(this)}}e.CombinatorContext=I;class P extends h.ParserRuleContext{univ_selector(){return this.tryGetRuleContext(0,$)}type_selector(){return this.tryGetRuleContext(0,U)}class_selector(){return this.tryGetRuleContext(0,k)}id_selector(){return this.tryGetRuleContext(0,j)}edge_selector(){return this.tryGetRuleContext(0,M)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_basic_selector}enterRule(t){t.enterBasic_selector&&t.enterBasic_selector(this)}exitRule(t){t.exitBasic_selector&&t.exitBasic_selector(this)}accept(t){return t.visitBasic_selector?t.visitBasic_selector(this):t.visitChildren(this)}}e.Basic_selectorContext=P;class $ extends h.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_univ_selector}enterRule(t){t.enterUniv_selector&&t.enterUniv_selector(this)}exitRule(t){t.exitUniv_selector&&t.exitUniv_selector(this)}accept(t){return t.visitUniv_selector?t.visitUniv_selector(this):t.visitChildren(this)}}e.Univ_selectorContext=$;class U extends h.ParserRuleContext{ID(){return this.getToken(p.ID,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_type_selector}enterRule(t){t.enterType_selector&&t.enterType_selector(this)}exitRule(t){t.exitType_selector&&t.exitType_selector(this)}accept(t){return t.visitType_selector?t.visitType_selector(this):t.visitChildren(this)}}e.Type_selectorContext=U;class k extends h.ParserRuleContext{DOT(){return this.getToken(p.DOT,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_class_selector}enterRule(t){t.enterClass_selector&&t.enterClass_selector(this)}exitRule(t){t.exitClass_selector&&t.exitClass_selector(this)}accept(t){return t.visitClass_selector?t.visitClass_selector(this):t.visitChildren(this)}}e.Class_selectorContext=k;class j extends h.ParserRuleContext{HASH(){return this.getToken(p.HASH,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_id_selector}enterRule(t){t.enterId_selector&&t.enterId_selector(this)}exitRule(t){t.exitId_selector&&t.exitId_selector(this)}accept(t){return t.visitId_selector?t.visitId_selector(this):t.visitChildren(this)}}e.Id_selectorContext=j;class M extends h.ParserRuleContext{ID(t){return void 0===t?this.getTokens(p.ID):this.getToken(p.ID,t)}EDGEOP(){return this.getToken(p.EDGEOP,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_edge_selector}enterRule(t){t.enterEdge_selector&&t.enterEdge_selector(this)}exitRule(t){t.exitEdge_selector&&t.exitEdge_selector(this)}accept(t){return t.visitEdge_selector?t.visitEdge_selector(this):t.visitChildren(this)}}e.Edge_selectorContext=M;class z extends h.ParserRuleContext{ID(){return this.getToken(p.ID,0)}DOT(t){return void 0===t?this.getTokens(p.DOT):this.getToken(p.DOT,t)}val(t){return void 0===t?this.getRuleContexts(G):this.getRuleContext(t,G)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_declaration}enterRule(t){t.enterDeclaration&&t.enterDeclaration(this)}exitRule(t){t.exitDeclaration&&t.exitDeclaration(this)}accept(t){return t.visitDeclaration?t.visitDeclaration(this):t.visitChildren(this)}}e.DeclarationContext=z;class G extends h.ParserRuleContext{STRING(){return this.tryGetToken(p.STRING,0)}ID(){return this.tryGetToken(p.ID,0)}HASH(){return this.tryGetToken(p.HASH,0)}constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_val}enterRule(t){t.enterVal&&t.enterVal(this)}exitRule(t){t.exitVal&&t.exitVal(this)}accept(t){return t.visitVal?t.visitVal(this):t.visitChildren(this)}}e.ValContext=G;class F extends h.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return p.RULE_semi_colon}enterRule(t){t.enterSemi_colon&&t.enterSemi_colon(this)}exitRule(t){t.exitSemi_colon&&t.exitSemi_colon(this)}accept(t){return t.visitSemi_colon?t.visitSemi_colon(this):t.visitChildren(this)}}e.Semi_colonContext=F},362:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FurumaiLexer=void 0;const r=s(166),i=s(203),n=s(176),o=s(197),a=s(178),h=r.__importStar(s(168));class c extends n.Lexer{constructor(t){super(t),this._interp=new o.LexerATNSimulator(c._ATN,this)}get vocabulary(){return c.VOCABULARY}get grammarFileName(){return"Furumai.g4"}get ruleNames(){return c.ruleNames}get serializedATN(){return c._serializedATN}get channelNames(){return c.channelNames}get modeNames(){return c.modeNames}action(t,e,s){switch(e){case 19:this.STRING_action(t,s)}}STRING_action(t,e){switch(e){case 0:case 1:this.text=this.text.slice(1,-1)}}static get _ATN(){return c.__ATN||(c.__ATN=(new i.ATNDeserializer).deserialize(h.toCharArray(c._serializedATN))),c.__ATN}}e.FurumaiLexer=c,c.T__0=1,c.T__1=2,c.T__2=3,c.T__3=4,c.T__4=5,c.T__5=6,c.T__6=7,c.T__7=8,c.T__8=9,c.T__9=10,c.T__10=11,c.T__11=12,c.T__12=13,c.T__13=14,c.T__14=15,c.T__15=16,c.ID=17,c.HASH=18,c.DOT=19,c.STRING=20,c.EDGEOP=21,c.SPACES=22,c.SINGLE_LINE_COMMENT=23,c.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],c.modeNames=["DEFAULT_MODE"],c.ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","T__12","T__13","T__14","T__15","ID","HASH","DOT","STRING","EDGEOP","SPACES","SINGLE_LINE_COMMENT"],c._LITERAL_NAMES=[void 0,"'---'","'config'","'{'","';'","'}'","'group'","'zone'","'['","','","']'","'hide'","'style'","'>'","'*'","':'","'='"],c._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"ID","HASH","DOT","STRING","EDGEOP","SPACES","SINGLE_LINE_COMMENT"],c.VOCABULARY=new a.VocabularyImpl(c._LITERAL_NAMES,c._SYMBOLIC_NAMES,[]),c._serializedATN="\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\b\b\b\b\b\t\t\n\n\v\v\f\f\f\f\f\r\r\r\r\r\rh\nk\n\rlq\n\rru\n\fx\v\n\f\v\n\f\v\n\n\n\f\v\n\t\v\r\b\t\n\v\f\r!#%')+-/\b2;C\\aac|))$$\v\r\"\"\f\f\f\f\t\v\r!#%')+-/15<\t>\v@\rBHMOQSX^`b!d#g%y'|)+-/12/23/34/456e67q78p89h9:k:;i;<=}=\b>?=?\n@AA\fBCiCDtDEqEFwFGrGHI|IJqJKpKLgLMN]NOP.PQR_RSTjTUkUVfVWgWXYuYZvZ[{[\\n\\]g]^_@_`a,abc<c de?e\"fh/gfghhjik\tjiklljlmmvnp/oq\tpoqrrprssutnuxvtvww$xvyz%z{#{&|}0}~#~()\n)\b$\n$\b*///@,\t\b.11\n\t\b0\rglrv"},363:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Update=e.Layout=e.Story=void 0;class r{constructor(t,e,s){this.config=t,this.layout=e,this.updates=s}withDefault(t,e){return new r(Object.assign(Object.assign({},t),this.config),new i(this.layout.root,this.layout.edges,e.update(this.layout.styles)),this.updates)}}e.Story=r;class i{constructor(t,e,s){this.root=t,this.edges=e,this.styles=s}update(t){return t.elems.forEach(t=>{const e=this.root.find(t.id)||this.edges.find(e=>e.id===t.id);if(!e)throw new Error("not found: "+t.id);e.visible(),e.update(t)}),t.edges.forEach(t=>{const e=this.edges.find(e=>e.same(t));e?(e.visible(),e.updateEdge(t)):(t.visible(),this.edges.push(t)),this.edges.forEach(t=>{const e=this.root.find(t.from);e&&e.visible();const s=this.root.find(t.to);s&&s.visible()})}),t.hides.forEach(t=>{const{id:e,edge:s}=t;if(e){const t=this.root.find(e)||this.edges.find(t=>t.id===e);if(!t)throw new Error("not found: "+e);t.hide()}else{if(!s)throw new Error("unsupported");{const t=this.edges.find(t=>t.same(s));if(!t)throw new Error("not found: "+s);t.hide()}}}),this.styles.update(t.styles),this}}e.Layout=i;e.Update=class{constructor(t,e,s,r){this.elems=t,this.edges=e,this.hides=s,this.styles=r}}},364:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VIcon=void 0;e.VIcon=class{static of(t){return t}}},365:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Box=void 0;e.Box=class{static of(t){return t}}},366:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;const r=s(268),i=s(170),n=s(179);e.Arrow=class{constructor(t,e,s,r){this.id=t,this.className=e,this.shape=s,this.textAttrs=r,this.defaults={arrow:{head:{size:16,degree:27}}}}get arrow(){return Object.assign(Object.assign({},this.shape.elem(this.id,this.className)),{d:this.arrowPath(),text:this.text})}get edge(){return Object.assign(Object.assign({},this.shape.elem(this.id,this.className)),{d:this.line(),text:this.text})}get text(){const t=this.shape.text;if(t){const{x:e,y:s}=this.textPosition;return t.base=new i.Point(i.Length.pixel(e),i.Length.pixel(s)),t.centering(!0),t}}get textPosition(){const{x1:t,y1:e,x2:s,y2:o}=this.xy,a=new r.Vector2d(t,e,s,o);let h=a.normalize();h=0===h.dy?h.rotate(90*Math.sign(h.dx)):h.dy>0?h.rotate(-90):h.rotate(90),h=h.multiple(24);const c=a.dx/a.length,l=Math.abs(c)>.98?a.multiple(c).multiple(.35):a.multiple(.1),u=this.shape.territory,d=n.m(i.Length.parse,this.textAttrs.dx)||i.Length.zero,_=n.m(i.Length.parse,this.textAttrs.dy)||i.Length.zero;return{x:u.cx.pixel+h.dx/2-l.dx/4+d.pixel,y:u.cy.pixel+h.dy/2-l.dy/4+_.pixel}}get xy(){const t=this.shape.territory,e=t.start,s=t.end;return{x1:e.x.pixel,y1:e.y.pixel,x2:s.x.pixel,y2:s.y.pixel}}line(){const{x1:t,y1:e,x2:s,y2:r}=this.xy;return`M${t} ${e} L${s} ${r}`}arrowPath(){const{x1:t,y1:e,x2:s,y2:i}=this.xy;function n(n,o){return new r.Vector2d(t,e,s,i).normalize().multiple(o).rotate(n).negate().move(s,i)}const o=this.defaults.arrow.head.degree,a=this.defaults.arrow.head.size,h=n(o,a),c=n(-o,a);return`M ${t} ${e}\nL ${s} ${i}\nM ${h.x2} ${h.y2}\nL ${s} ${i}\nM ${c.x2} ${c.y2}\nL ${s} ${i}`}}},367:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cylinder=void 0;e.Cylinder=class{constructor(t,e,s){this.id=t,this.className=e,this.shape=s}get elem(){return Object.assign(Object.assign({},this.shape.elem(this.id,this.className)),{d:this.d,icon:void 0})}get d(){const t=this.shape.territory,e=t.cx.pixel,s=t.cy.pixel,{width:r,height:i}=t.area.asPixel(),n=8+1.2*r/20,o=e-r/2,a=e+r/2,h=s-i/2,c=h-n,l=h+n,u=s+i/2,d=u+n;return`M ${a},${h}\nC ${a},${l}\n  ${o},${l}\n  ${o},${h}\nM ${a},${h}\nC ${a},${c}\n  ${o},${c}\n  ${o},${h}\nM ${a},${h}\nL ${a},${u}\nC ${a},${d}\n  ${o},${d}\n  ${o},${u}\nL ${o},${h}`}}},368:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextElem=void 0;const r=s(170);e.TextElem=class{constructor(t,e,s,r){this.content=t,this.centered=e,this.base=s,this.svgAttrs=r}centering(t){this.centered=t}get lines(){const t=this.content;if(t){if(this.centered){const[e,...s]=t.split("\\n");return[{text:e,dy:.35-.5*s.length+"em"},...s.map(t=>({text:t,dy:"1em"}))]}{const e=this.svgAttrs.svgAttrs.dy?this.svgAttrs.svgAttrs.dy.toString():r.Length.zero.toString(),[s,...i]=t.split("\\n");return[{text:s,dy:e},...i.map(t=>({text:t,dy:"1em"}))]}}return[]}}},369:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Person=void 0;const r=s(170);e.Person=class{constructor(t,e,s){this.id=t,this.className=e,this.shape=s}get elem(){return Object.assign(Object.assign({},this.shape.elem(this.id,this.className)),{d:this.d,icon:void 0})}get text(){const t=this.shape.text;if(t)return t.base=this.textPosition,t}get textPosition(){const t=this.shape.territory,{padding:e}=t.area,s=e.left,i=e.top.sub(r.Length.pixel(28));return t.start.move(s,i)}get d(){const t=this.shape.territory,{x:e,y:s}=t.start,{width:r,height:i}=t.area;return this.person(e.pixel+r.pixel/4,s.pixel,r.pixel/2,i.pixel)}person(t,e,s,r){const i=this.shape.territory.cx.pixel,n=t+s,o=e+r,a=r/5,h=i-a,c=i+a,l=e-a/3,u=e+a,d=e+2*a+a/3,_=e+3*a,p=4*a+e;return`M ${h},${u}\nC ${h},${d}\n${c},${d}\n${c},${u}\nM ${h},${u}\nC ${h},${l}\n${c},${l}\n${c},${u}\nM${i},${e+2*a}\nL${i},${p}\nM${t},${_}\nL${n},${_}\nM${i},${p}\nL${t},${o}\nM${i},${p}\nL${n},${o}`}}},370:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pipe=void 0;const r=s(170);e.Pipe=class{constructor(t,e,s){this.id=t,this.className=e,this.shape=s}get elem(){return Object.assign(Object.assign({},this.shape.elem(this.id,this.className)),{text:this.text,d:this.d,icon:void 0})}get text(){const t=this.shape.text;if(t)return t.base=this.textPosition,t}get textPosition(){const t=this.shape.territory,{padding:e}=t.area,s=e.left.add(r.Length.pixel(10)),i=e.top.sub(r.Length.pixel(6));return t.start.move(s,i)}get d(){const t=this.shape.territory,e=t.cx.pixel,s=t.cy.pixel,{width:r,height:i}=t.area.asPixel(),n=8+1.2*r/20,o=e-r/2,a=e+r/2,h=s-i/2,c=s+i/2;return`M ${o},${h}\nC ${o+n},${h}\n  ${o+n},${c}\n  ${o},${c}\nM ${o},${h}\nC ${o-n},${h}\n  ${o-n},${c}\n  ${o},${c}\nM ${o},${h}\nL ${a},${h}\nC ${a+n},${h}\n  ${a+n},${c}\n  ${a},${c}\nL ${o},${c}`}}},371:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;const r=s(268),i=s(170);class n{static fit(t,e,s,n){function o(t,e){const s=[];if(t.dx<0){const r=-(t.x1-e.cx.pixel+e.width.pixel/2)/t.dx;s.push(t.multiple(r))}else if(t.dx>0){const r=(e.cx.pixel-t.x1+e.width.pixel/2)/t.dx;s.push(t.multiple(r))}if(t.dy<0){const r=-(t.y1-e.cy.pixel+e.height.pixel/2)/t.dy;s.push(t.multiple(r))}else if(t.dy>0){const r=(e.cy.pixel-t.y1+e.height.pixel/2)/t.dy;s.push(t.multiple(r))}if(1===s.length)return s[0];if(2===s.length){const t=s[0],e=s[1];return t.length<e.length?t:e}throw new Error("not implemented: "+JSON.stringify(s)+", "+JSON.stringify(t))}const a=t.cx.pixel+s,h=t.cy.pixel+n,c=e.cx.pixel+s,l=e.cy.pixel+n,u=new r.Vector2d(a,h,c,l),d=o(u,t),_=o(u.reverse(),e),p=a+d.dx,f=h+d.dy,x=c+_.dx-p,m=l+_.dy-f,g=new i.Point(i.Length.pixel(p),i.Length.pixel(f)),v=new i.Area(i.Length.pixel(x),i.Length.pixel(m),i.Gap.zero,i.Gap.zero);return new i.Territory(g,v)}}e.Arrow=n,n.singleton=new n},372:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hide=void 0;const r=s(270);class i{constructor(t,e){this.id=t,this.edge=e}static elem(t){return new i(t,void 0)}static edge(t,e,s){return new i(void 0,r.Edge.of(t,e,s))}}e.Hide=i},373:function(t,e,s){"use strict";s(271)},374:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataEncoderDecoderV1=void 0;const r=s(166).__importDefault(s(375));e.DataEncoderDecoderV1=class{constructor(){this.formatVersion="v1"}decode(t){const e=r.default.decompressFromEncodedURIComponent(t);return JSON.parse(e)}encode(t){const e=JSON.stringify(t);return r.default.compressToEncodedURIComponent(e)}}},376:function(t,e,s){"use strict";s(272)},381:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav",{staticClass:"nav"},[s("div",{staticClass:"nav-right"},[s("a",{staticClass:"edit-button",attrs:{href:t.appUrl(t.url)}},[t._v("Edit")])])]),t._v(" "),1===t.ver?s("FurumaiApp1",{attrs:{furumaiData:t.furumaiData,editorMode:!1,viewCode:"false"!==this.viewCode}}):-1===t.ver?s("div",[t._v("version = -1")]):s("div",[t._v("version error: "+t._s(t.ver))])],1)},i=[]},382:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app1"},[s("div",{staticClass:"row"},[t.viewCode?s("div",{staticClass:"col"},[t.editorMode?s("div",{staticClass:"code-editor-wrap"},[s("label",[s("div",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.furumaiData.code,expression:"furumaiData.code"}],ref:"editor",staticClass:"code-editor",attrs:{title:"Furumai Description"},domProps:{value:t.furumaiData.code},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.metaKey?e.ctrlKey||e.shiftKey||e.altKey?null:t.furumai.apply(null,arguments):null},keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.furumai.apply(null,arguments):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.altKey?t.furumai.apply(null,arguments):null}],input:function(e){e.target.composing||t.$set(t.furumaiData,"code",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"nav-right"},[s("label",{staticClass:"options"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.furumaiData.rough,expression:"furumaiData.rough"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.furumaiData.rough)?t._i(t.furumaiData.rough,null)>-1:t.furumaiData.rough},on:{change:[function(e){var s=t.furumaiData.rough,r=e.target,i=!!r.checked;if(Array.isArray(s)){var n=t._i(s,null);r.checked?n<0&&t.$set(t.furumaiData,"rough",s.concat([null])):n>-1&&t.$set(t.furumaiData,"rough",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.furumaiData,"rough",i)},t.furumai]}}),t._v("Rough.js\n            ")]),t._v(" "),s("label",{staticClass:"options"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.furumaiData.displayFirstSvg,expression:"furumaiData.displayFirstSvg"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.furumaiData.displayFirstSvg)?t._i(t.furumaiData.displayFirstSvg,null)>-1:t.furumaiData.displayFirstSvg},on:{change:[function(e){var s=t.furumaiData.displayFirstSvg,r=e.target,i=!!r.checked;if(Array.isArray(s)){var n=t._i(s,null);r.checked?n<0&&t.$set(t.furumaiData,"displayFirstSvg",s.concat([null])):n>-1&&t.$set(t.furumaiData,"displayFirstSvg",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.furumaiData,"displayFirstSvg",i)},t.furumai]}}),t._v("Display 1st SVG\n            ")]),t._v(" "),s("button",{staticClass:"button primary furumai-button",on:{click:t.furumai}},[t._v("View (Ctrl + Enter)")])]),t._v(" "),s("hr"),t._v(" "),s("div",[t._v("\n            Default settings:\n            "),s("pre",[t._v(t._s(t.defaults))])])])]):s("div",{staticClass:"code-viewer"},[s("pre",{staticClass:"language-none"},[t._v(t._s(t.pre(t.furumaiData.code)))])])]):t._e(),t._v(" "),s("div",{staticClass:"col-6"},[t.errors.length>0?s("div",{staticClass:"text-error"},[s("pre",[t._v(t._s(t.errors))])]):s("div",{ref:"moments"},t._l(t.svgs,(function(e){return s("div",{staticClass:"card"},[s("SvgComponent",{attrs:{svg:e,rough:t.furumaiData.rough}})],1)})),0),t._v(" "),s("div",{staticClass:"nav-right moments-footer"},[t.editorMode?s("button",{staticClass:"button primary",on:{click:t.download}},[t._v("Download SVG(s)")]):t._e()])])])])},i=[]},383:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"svgContainer"},[t.rough&&t.roughHtml.length>0?s("svg",{staticClass:"svg-root",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:t.viewBox,width:t.width.pixel,height:t.height.pixel},domProps:{innerHTML:t._s(t.roughHtml)}}):s("svg",{staticClass:"svg-root",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:svgns":"http://www.w3.org/2000/svg",viewBox:t.viewBox,width:t.width.pixel,height:t.height.pixel,id:"svgRoot"}},[t.svg.styles.length>0?s("svgns:style",{attrs:{type:"text/css"}},[t._v(t._s(t.svg.styles))]):t._e(),t._v(" "),s("Group",{attrs:{g:t.svg.root}})],1)])},i=[]},384:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("g",t._b({},"g",t.attrs,!1),[s("g",{staticClass:"self"},[t.g.elem.d?s("path",t._b({attrs:{d:t.g.elem.d}},"path",t.childAttrs,!1)):t.g.elem.icon?s("VIcon",{attrs:{elem:t.g.elem}}):s("rect",t._b({},"rect",t.childAttrs,!1)),t._v(" "),s("TextContent",{attrs:{text:t.g.elem.text}}),t._v(" "),s("LabelComponent",{attrs:{text:t.g.elem.label}})],1),t._v(" "),t._l(t.g.children,(function(t){return s("Group",{key:t.elem.secureAttrs.svgAttrs.id,attrs:{g:t}})}))],2)},i=[]},385:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.text?s("text",t._b({staticClass:"label",attrs:{x:t.text.base.x,y:t.text.base.y}},"text",t.text.svgAttrs.svgAttrs,!1),t._l(t.text.lines,(function(e){return t.text?s("tspan",{attrs:{dy:e.dy,x:t.text.base.x}},[t._v(t._s(e.text)+"\n  ")]):t._e()})),0):t._e()},i=[]},386:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.text?s("text",t._b({staticClass:"text",attrs:{x:t.text.base.x,y:t.text.base.y}},"text",t.text.svgAttrs.svgAttrs,!1),t._l(t.text.lines,(function(e){return t.text?s("tspan",{attrs:{dy:e.dy,x:t.text.base.x}},[t._v(t._s(e.text)+"\n  ")]):t._e()})),0):t._e()},i=[]},387:function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"b",(function(){return i}));var r=function(){var t=this.$createElement;return(this._self._c||t)("v-icon",this._b({staticClass:"no_rough",attrs:{name:this.name}},"v-icon",this.svgAttrs,!1))},i=[]},389:function(t,e,s){"use strict";s.r(e);var r=s(381),i=s(205);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);s(376);var o=s(0),a=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);e.default=a.exports}}]);